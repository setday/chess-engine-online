/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e,t,s,i,r={169:(e,t,s)=>{s.d(t,{d$:()=>D});const i="w",r="b",a="p",o="b",n="r",h="q",c="k",d="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",l=-1,u={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},b={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},p={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},f={b:[16,32,17,15],w:[-16,-32,-17,-15]},g={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},m=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],v=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],w={p:1,n:2,b:4,r:8,q:16,k:32},k=["n",o,n,h],_={[c]:b.KSIDE_CASTLE,[h]:b.QSIDE_CASTLE},S={w:[{square:p.a1,flag:b.QSIDE_CASTLE},{square:p.h1,flag:b.KSIDE_CASTLE}],b:[{square:p.a8,flag:b.QSIDE_CASTLE},{square:p.h8,flag:b.KSIDE_CASTLE}]},q={b:1,w:6},y=["1-0","0-1","1/2-1/2","*"];function E(e){return e>>4}function C(e){return 15&e}function I(e){return-1!=="0123456789".indexOf(e)}function P(e){const t=C(e),s=E(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(s,s+1)}function x(e){return e===i?r:i}function T(e,t,s,i,r,o=void 0,n=b.NORMAL){const h=E(i);if(r!==a||7!==h&&0!==h)e.push({color:t,from:s,to:i,piece:r,captured:o,flags:n});else for(let a=0;a<k.length;a++){const h=k[a];e.push({color:t,from:s,to:i,piece:r,captured:o,promotion:h,flags:n|b.PROMOTION})}}function M(e){let t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return a}return t=t.toLowerCase(),"o"===t?c:t}function A(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function L(e){return e.split(" ").slice(0,4).join(" ")}class D{_board=new Array(128);_turn=i;_header={};_kings={w:l,b:l};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_positionCount={};constructor(e=d){this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:l,b:l},this._turn=i,this._castling={w:0,b:0},this._epSquare=l,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:t=!1,preserveHeaders:s=!1}={}){let a=e.split(/\s+/);if(a.length>=2&&a.length<6){const t=["-","-","0","1"];e=a.concat(t.slice(-(6-a.length))).join(" ")}if(a=e.split(/\s+/),!t){const{ok:t,error:s}=function(e){const t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const s=parseInt(t[5],10);if(isNaN(s)||s<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const i=parseInt(t[4],10);if(isNaN(i)||i<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const r=t[0].split("/");if(8!==r.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let e=0;e<r.length;e++){let t=0,s=!1;for(let i=0;i<r[e].length;i++)if(I(r[e][i])){if(s)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(r[e][i],10),s=!0}else{if(!/^[prnbqkPRNBQK]$/.test(r[e][i]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,s=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const a=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:e,regex:s}of a){if(!s.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(s)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return Array.from(r[0]+r[7]).some((e=>"P"===e.toUpperCase()))?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}(e);if(!t)throw new Error(s)}const o=a[0];let n=0;this.clear({preserveHeaders:s});for(let e=0;e<o.length;e++){const t=o.charAt(e);if("/"===t)n+=8;else if(I(t))n+=parseInt(t,10);else{const e=t<"a"?i:r;this._put({type:t.toLowerCase(),color:e},P(n)),n++}}this._turn=a[1],a[2].indexOf("K")>-1&&(this._castling.w|=b.KSIDE_CASTLE),a[2].indexOf("Q")>-1&&(this._castling.w|=b.QSIDE_CASTLE),a[2].indexOf("k")>-1&&(this._castling.b|=b.KSIDE_CASTLE),a[2].indexOf("q")>-1&&(this._castling.b|=b.QSIDE_CASTLE),this._epSquare="-"===a[3]?l:p[a[3]],this._halfMoves=parseInt(a[4],10),this._moveNumber=parseInt(a[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){let e=0,t="";for(let s=p.a8;s<=p.h1;s++){if(this._board[s]){e>0&&(t+=e,e=0);const{color:r,type:a}=this._board[s];t+=r===i?a.toUpperCase():a.toLowerCase()}else e++;s+1&136&&(e>0&&(t+=e),s!==p.h1&&(t+="/"),e=0,s+=8)}let s="";this._castling[i]&b.KSIDE_CASTLE&&(s+="K"),this._castling[i]&b.QSIDE_CASTLE&&(s+="Q"),this._castling[r]&b.KSIDE_CASTLE&&(s+="k"),this._castling[r]&b.QSIDE_CASTLE&&(s+="q"),s=s||"-";let o="-";if(this._epSquare!==l){const e=this._epSquare+(this._turn===i?16:-16),t=[e+1,e-1];for(const e of t){if(136&e)continue;const t=this._turn;if(this._board[e]?.color===t&&this._board[e]?.type===a){this._makeMove({color:t,from:e,to:this._epSquare,piece:a,captured:a,flags:b.EP_CAPTURE});const s=!this._isKingAttacked(t);if(this._undoMove(),s){o=P(this._epSquare);break}}}}return[t,this._turn,s,o,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==d?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(d)}get(e){return this._board[p[e]]||!1}put({type:e,color:t},s){return!!this._put({type:e,color:t},s)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}_put({type:e,color:t},s){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase()))return!1;if(!(s in p))return!1;const i=p[s];if(e==c&&this._kings[t]!=l&&this._kings[t]!=i)return!1;const r=this._board[i];return r&&r.type===c&&(this._kings[r.color]=l),this._board[i]={type:e,color:t},e===c&&(this._kings[t]=i),!0}remove(e){const t=this.get(e);return delete this._board[p[e]],t&&t.type===c&&(this._kings[t.color]=l),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){const e=this._board[p.e1]?.type===c&&this._board[p.e1]?.color===i,t=this._board[p.e8]?.type===c&&this._board[p.e8]?.color===r;e&&this._board[p.a1]?.type===n&&this._board[p.a1]?.color===i||(this._castling.w&=~b.QSIDE_CASTLE),e&&this._board[p.h1]?.type===n&&this._board[p.h1]?.color===i||(this._castling.w&=~b.KSIDE_CASTLE),t&&this._board[p.a8]?.type===n&&this._board[p.a8]?.color===r||(this._castling.b&=~b.QSIDE_CASTLE),t&&this._board[p.h8]?.type===n&&this._board[p.h8]?.color===r||(this._castling.b&=~b.KSIDE_CASTLE)}_updateEnPassantSquare(){if(this._epSquare===l)return;const e=this._epSquare+(this._turn===i?-16:16),t=this._epSquare+(this._turn===i?16:-16),s=[t+1,t-1];null===this._board[e]&&null===this._board[this._epSquare]&&this._board[t]?.color===x(this._turn)&&this._board[t]?.type===a&&s.some((e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type===a))||(this._epSquare=l)}_attacked(e,t){for(let s=p.a8;s<=p.h1;s++){if(136&s){s+=7;continue}if(void 0===this._board[s]||this._board[s].color!==e)continue;const o=this._board[s],n=s-t;if(0===n)continue;const h=n+119;if(m[h]&w[o.type]){if(o.type===a){if(n>0){if(o.color===i)return!0}else if(o.color===r)return!0;continue}if("n"===o.type||"k"===o.type)return!0;const e=v[h];let c=s+e,d=!1;for(;c!==t;){if(null!=this._board[c]){d=!0;break}c+=e}if(!d)return!0}}return!1}_isKingAttacked(e){const t=this._kings[e];return-1!==t&&this._attacked(x(e),t)}isAttacked(e,t){return this._attacked(t,p[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let s=0,i=0;for(let r=p.a8;r<=p.h1;r++){if(i=(i+1)%2,136&r){r+=7;continue}const a=this._board[r];a&&(e[a.type]=a.type in e?e[a.type]+1:1,a.type===o&&t.push(i),s++)}if(2===s)return!0;if(3===s&&(1===e[o]||1===e.n))return!0;if(s===e[o]+2){let e=0;const s=t.length;for(let i=0;i<s;i++)e+=t[i];if(0===e||e===s)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:s}={}){const i=this._moves({square:t,piece:s});return e?i.map((e=>this._makePretty(e))):i.map((e=>this._moveToSan(e,i)))}_moves({legal:e=!0,piece:t,square:s}={}){const i=s?s.toLowerCase():void 0,r=t?.toLowerCase(),o=[],n=this._turn,h=x(n);let d=p.a8,l=p.h1,u=!1;if(i){if(!(i in p))return[];d=l=p[i],u=!0}for(let e=d;e<=l;e++){if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===h)continue;const{type:t}=this._board[e];let s;if(t===a){if(r&&r!==t)continue;s=e+f[n][0],this._board[s]||(T(o,n,e,s,a),s=e+f[n][1],q[n]!==E(e)||this._board[s]||T(o,n,e,s,a,void 0,b.BIG_PAWN));for(let t=2;t<4;t++)s=e+f[n][t],136&s||(this._board[s]?.color===h?T(o,n,e,s,a,this._board[s].type,b.CAPTURE):s===this._epSquare&&T(o,n,e,s,a,a,b.EP_CAPTURE))}else{if(r&&r!==t)continue;for(let i=0,r=g[t].length;i<r;i++){const r=g[t][i];for(s=e;s+=r,!(136&s);){if(this._board[s]){if(this._board[s].color===n)break;T(o,n,e,s,t,this._board[s].type,b.CAPTURE);break}if(T(o,n,e,s,t),"n"===t||t===c)break}}}}if(!(void 0!==r&&r!==c||u&&l!==this._kings[n])){if(this._castling[n]&b.KSIDE_CASTLE){const e=this._kings[n],t=e+2;this._board[e+1]||this._board[t]||this._attacked(h,this._kings[n])||this._attacked(h,e+1)||this._attacked(h,t)||T(o,n,this._kings[n],t,c,void 0,b.KSIDE_CASTLE)}if(this._castling[n]&b.QSIDE_CASTLE){const e=this._kings[n],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(h,this._kings[n])||this._attacked(h,e-1)||this._attacked(h,t)||T(o,n,this._kings[n],t,c,void 0,b.QSIDE_CASTLE)}}if(!e||-1===this._kings[n])return o;const m=[];for(let e=0,t=o.length;e<t;e++)this._makeMove(o[e]),this._isKingAttacked(n)||m.push(o[e]),this._undoMove();return m}move(e,{strict:t=!1}={}){let s=null;if("string"==typeof e)s=this._moveFromSan(e,t);else if("object"==typeof e){const t=this._moves();for(let i=0,r=t.length;i<r;i++)if(e.from===P(t[i].from)&&e.to===P(t[i].to)&&(!("promotion"in t[i])||e.promotion===t[i].promotion)){s=t[i];break}}if(!s)throw"string"==typeof e?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const i=this._makePretty(s);return this._makeMove(s),this._incPositionCount(i.after),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const t=this._turn,s=x(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&b.EP_CAPTURE&&(this._turn===r?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===c){if(this._kings[t]=e.to,e.flags&b.KSIDE_CASTLE){const t=e.to-1,s=e.to+1;this._board[t]=this._board[s],delete this._board[s]}else if(e.flags&b.QSIDE_CASTLE){const t=e.to+1,s=e.to-2;this._board[t]=this._board[s],delete this._board[s]}this._castling[t]=0}if(this._castling[t])for(let s=0,i=S[t].length;s<i;s++)if(e.from===S[t][s].square&&this._castling[t]&S[t][s].flag){this._castling[t]^=S[t][s].flag;break}if(this._castling[s])for(let t=0,i=S[s].length;t<i;t++)if(e.to===S[s][t].square&&this._castling[s]&S[s][t].flag){this._castling[s]^=S[s][t].flag;break}e.flags&b.BIG_PAWN?this._epSquare=t===r?e.to-16:e.to+16:this._epSquare=l,e.piece===a||e.flags&(b.CAPTURE|b.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===r&&this._moveNumber++,this._turn=s}undo(){const e=this._undoMove();if(e){const t=this._makePretty(e);return this._decPositionCount(t.after),t}return null}_undoMove(){const e=this._history.pop();if(void 0===e)return null;const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const s=this._turn,i=x(s);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&b.EP_CAPTURE){let e;e=s===r?t.to-16:t.to+16,this._board[e]={type:a,color:i}}else this._board[t.to]={type:t.captured,color:i};if(t.flags&(b.KSIDE_CASTLE|b.QSIDE_CASTLE)){let e,s;t.flags&b.KSIDE_CASTLE?(e=t.to+1,s=t.to-1):(e=t.to-2,s=t.to+1),this._board[e]=this._board[s],delete this._board[s]}return t}pgn({newline:e="\n",maxWidth:t=0}={}){const s=[];let i=!1;for(const t in this._header)s.push("["+t+' "'+this._header[t]+'"]'+e),i=!0;i&&this._history.length&&s.push(e);const r=e=>{const t=this._comments[this.fen()];return void 0!==t&&(e=`${e}${e.length>0?" ":""}{${t}}`),e},a=[];for(;this._history.length>0;)a.push(this._undoMove());const o=[];let n="";for(0===a.length&&o.push(r(""));a.length>0;){n=r(n);const e=a.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(n.length&&o.push(n),n=this._moveNumber+".");else{const e=`${this._moveNumber}. ...`;n=n?`${n} ${e}`:e}n=n+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(n.length&&o.push(r(n)),void 0!==this._header.Result&&o.push(this._header.Result),0===t)return s.join("")+o.join(" ");const h=function(){return s.length>0&&" "===s[s.length-1]&&(s.pop(),!0)},c=function(i,r){for(const a of r.split(" "))if(a){if(i+a.length>t){for(;h();)i--;s.push(e),i=0}s.push(a),i+=a.length,s.push(" "),i++}return h()&&i--,i};let d=0;for(let i=0;i<o.length;i++)d+o[i].length>t&&o[i].includes("{")?d=c(d,o[i]):(d+o[i].length>t&&0!==i?(" "===s[s.length-1]&&s.pop(),s.push(e),d=0):0!==i&&(s.push(" "),d++),s.push(o[i]),d+=o[i].length);return s.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:s="\r?\n"}={}){function i(e){return e.replace(/\\/g,"\\")}e=e.trim();const r=new RegExp("^(\\[((?:"+i(s)+")|.)*\\])((?:\\s*"+i(s)+"){2}|(?:\\s*"+i(s)+")*$)").exec(e),a=r&&r.length>=2?r[1]:"";this.reset();const o=function(e){const t={},r=e.split(new RegExp(i(s)));let a="",o="";for(let e=0;e<r.length;e++){const s=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;a=r[e].replace(s,"$1"),o=r[e].replace(s,"$2"),a.trim().length>0&&(t[a]=o)}return t}(a);let n="";for(const e in o)"fen"===e.toLowerCase()&&(n=o[e]),this.header(e,o[e]);if(t){if("1"===o.SetUp){if(!("FEN"in o))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(o.FEN,{preserveHeaders:!0})}}else n&&this.load(n,{preserveHeaders:!0});const h=function(e){return`{${function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()})).join("")}((e=e.replace(new RegExp(i(s),"g")," ")).slice(1,e.length-1))}}`},c=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+(e.match(/.{1,2}/g)||[]).join("%"))}(e.slice(1,e.length-1))};let d=e.replace(a,"").replace(new RegExp(`({[^}]*})+?|;([^${i(s)}]*)`,"g"),(function(e,t,s){return void 0!==t?h(t):" "+h(`{${s.slice(1)}}`)})).replace(new RegExp(i(s),"g")," ");const l=/(\([^()]+\))+?/g;for(;l.test(d);)d=d.replace(l,"");d=d.replace(/\d+\.(\.\.)?/g,""),d=d.replace(/\.\.\./g,""),d=d.replace(/\$\d+/g,"");let u=d.trim().split(new RegExp(/\s+/));u=u.filter((e=>""!==e));let b="";for(let e=0;e<u.length;e++){const s=c(u[e]);if(void 0!==s){this._comments[this.fen()]=s;continue}const i=this._moveFromSan(u[e],t);if(null==i){if(!(y.indexOf(u[e])>-1))throw new Error(`Invalid move in PGN: ${u[e]}`);b=u[e]}else b="",this._makeMove(i),this._incPositionCount(this.fen())}b&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",b)}_moveToSan(e,t){let s="";if(e.flags&b.KSIDE_CASTLE)s="O-O";else if(e.flags&b.QSIDE_CASTLE)s="O-O-O";else{if(e.piece!==a){const i=function(e,t){const s=e.from,i=e.to,r=e.piece;let a=0,o=0,n=0;for(let e=0,h=t.length;e<h;e++){const h=t[e].from,c=t[e].to;r===t[e].piece&&s!==h&&i===c&&(a++,E(s)===E(h)&&o++,C(s)===C(h)&&n++)}return a>0?o>0&&n>0?P(s):n>0?P(s).charAt(1):P(s).charAt(0):""}(e,t);s+=e.piece.toUpperCase()+i}e.flags&(b.CAPTURE|b.EP_CAPTURE)&&(e.piece===a&&(s+=P(e.from)[0]),s+="x"),s+=P(e.to),e.promotion&&(s+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(e,t=!1){const s=A(e);let i,r,a,o,n,h=M(s),c=this._moves({legal:!0,piece:h});for(let e=0,t=c.length;e<t;e++)if(s===A(this._moveToSan(c[e],c)))return c[e];if(t)return null;let d=!1;if(r=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),r?(i=r[1],a=r[2],o=r[3],n=r[4],1==a.length&&(d=!0)):(r=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),r&&(i=r[1],a=r[2],o=r[3],n=r[4],1==a.length&&(d=!0))),h=M(s),c=this._moves({legal:!0,piece:i||h}),!o)return null;for(let e=0,t=c.length;e<t;e++)if(a){if(!(i&&i.toLowerCase()!=c[e].piece||p[a]!=c[e].from||p[o]!=c[e].to||n&&n.toLowerCase()!=c[e].promotion))return c[e];if(d){const t=P(c[e].from);if(!(i&&i.toLowerCase()!=c[e].piece||p[o]!=c[e].to||a!=t[0]&&a!=t[1]||n&&n.toLowerCase()!=c[e].promotion))return c[e]}}else if(s===A(this._moveToSan(c[e],c)).replace("x",""))return c[e];return null}ascii(){let e="   +------------------------+\n";for(let t=p.a8;t<=p.h1;t++){if(0===C(t)&&(e+=" "+"87654321"[E(t)]+" |"),this._board[t]){const s=this._board[t].type;e+=" "+(this._board[t].color===i?s.toUpperCase():s.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let s=0;const i=this._turn;for(let r=0,a=t.length;r<a;r++)this._makeMove(t[r]),this._isKingAttacked(i)||(e-1>0?s+=this.perft(e-1):s++),this._undoMove();return s}_makePretty(e){const{color:t,piece:s,from:i,to:r,flags:a,captured:o,promotion:n}=e;let h="";for(const e in b)b[e]&a&&(h+=u[e]);const c=P(i),d=P(r),l={color:t,piece:s,from:c,to:d,san:this._moveToSan(e,this._moves({legal:!0})),flags:h,lan:c+d,before:this.fen(),after:""};return this._makeMove(e),l.after=this.fen(),this._undoMove(),o&&(l.captured=o),n&&(l.promotion=n,l.lan+=n),l}turn(){return this._turn}board(){const e=[];let t=[];for(let s=p.a8;s<=p.h1;s++)null==this._board[s]?t.push(null):t.push({square:P(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(e.push(t),t=[],s+=8);return e}squareColor(e){if(e in p){const t=p[e];return(E(t)+C(t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],s=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const i=t.pop();if(!i)break;e?s.push(this._makePretty(i)):s.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return s}_getPositionCount(e){const t=L(e);return this._positionCount[t]||0}_incPositionCount(e){const t=L(e);void 0===this._positionCount[t]&&(this._positionCount[t]=0),this._positionCount[t]+=1}_decPositionCount(e){const t=L(e);1===this._positionCount[t]?delete this._positionCount[t]:this._positionCount[t]-=1}_pruneComments(){const e=[],t={},s=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(s(this.fen());;){const t=e.pop();if(!t)break;this._makeMove(t),s(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map((e=>({fen:e,comment:this._comments[e]})))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map((e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}}))}setCastlingRights(e,t){for(const s of[c,h])void 0!==t[s]&&(t[s]?this._castling[e]|=_[s]:this._castling[e]&=~_[s]);this._updateCastlingRights();const s=this.getCastlingRights(e);return!(void 0!==t[c]&&t[c]!==s[c]||void 0!==t[h]&&t[h]!==s[h])}getCastlingRights(e){return{[c]:!!(this._castling[e]&_[c]),[h]:!!(this._castling[e]&_[h])}}moveNumber(){return this._moveNumber}}},44:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var i=s(169),r=s(410),a=s(578),o=s(443),n=s(752),h=s(510);const d=await h.c("./../models/TORCH_100EPOCHS.onnx");let l=!1;var c=new i.d$;const u=new r.Ve(document.getElementById("board"),{position:c.fen(),assetsUrl:"./assets/",style:{borderType:r.qi.none,pieces:{file:"pieces/standard.svg"},animationDuration:300},orientation:r.o$.white,extensions:[{class:a.c,props:{autoMarkers:a.w.square}},{class:o.M},{class:n.T}]});document.getElementById("flipBoardButton").addEventListener("click",(()=>{u.setOrientation(u.getOrientation()===r.o$.white?r.o$.black:r.o$.white),setTimeout((e=>{v()}),300)})),document.getElementById("autoPlayButton").addEventListener("click",(()=>{l=!l,v()}));const b=document.getElementById("overlay"),p=document.getElementById("gameOverText"),f=document.getElementById("gameCode");function g(e){c.move(e),u.setPosition(c.fen(),!0),setTimeout((e=>{v()}),100)}async function m(e){const t=c.moves({verbose:!0}),s=t.map((e=>e.lan));if(t.length>0){const e=(await h.S(c,d)).filter((e=>s.includes(e)));e.length>0?g(e[0]):(console.log("Bot can't make move so it will make a random move"),g(t[Math.floor(Math.random()*t.length)]))}}function v(){return c.isCheckmate()?(p.innerText=c.turn()===u.getOrientation()?"You got checkmated!":"You checkmated the opponent!",void b.classList.toggle("hidden",!1)):c.isDraw()?(c.loadPgn(c.pgn()+" 1/2-1/2"),p.innerText="It's a draw!",void b.classList.toggle("hidden",!1)):void(c.turn()!==u.getOrientation()||l?(u.disableMoveInput(),m()):u.enableMoveInput(w,u.getOrientation()))}function w(e){if(e.type!==r.n1.movingOverSquare){if(e.type!==r.n1.moveInputFinished&&e.chessboard.removeLegalMovesMarkers(),e.type===r.n1.moveInputStarted){const t=c.moves({square:e.squareFrom,verbose:!0});return e.chessboard.addLegalMovesMarkers(t),t.length>0}if(e.type!==r.n1.moveInputFinished){if(e.type===r.n1.validateMoveInput){const t={from:e.squareFrom,to:e.squareTo,promotion:e.promotion};let s=!1;try{s=c.move(t),e.chessboard.state.moveInputProcess.then((()=>{e.chessboard.setPosition(c.fen(),!0).then((()=>{v()}))}))}catch(t){let s=c.moves({square:e.squareFrom,verbose:!0});for(const t of s)if(t.promotion&&t.to===e.squareTo)return e.chessboard.showPromotionDialog(e.squareTo,r.o$.white,(t=>{t.type===o.O.pieceSelected?g({from:e.squareFrom,to:e.squareTo,promotion:t.piece.charAt(1)}):(e.chessboard.enableMoveInput(w,e.chessboard.getOrientation()),e.chessboard.setPosition(c.fen(),!0))})),!0}return s}}else e.legalMove&&e.chessboard.disableMoveInput()}}document.getElementById("restartButton").addEventListener("click",(()=>{c.reset(),u.setPosition(c.fen(),!0),b.classList.toggle("hidden",!0),v()})),f.addEventListener("click",(()=>{navigator.clipboard.writeText(c.pgn()+" *").then((()=>{alert("Game code copied to clipboard!")}))})),u.enableMoveInput(w,r.o$.white),t()}catch(k){t(k)}}),1)},510:(e,t,s)=>{s.d(t,{c:()=>r,S:()=>n});const i=JSON.parse('{"e8a4":0,"a1a8":1,"e7h4":2,"c6g2":3,"b6b5":4,"f1f2":5,"d1f2":6,"e4e3":7,"b2b7":8,"a2e6":9,"d7c5":10,"g4e2":11,"g6e4":12,"d3f3":13,"b4a5":14,"f6f8":15,"f6b2":16,"g1e2":17,"h5h6":18,"f6g6":19,"h7g8":20,"f6c3":21,"b5d7":22,"a8d5":23,"b8f4":24,"a4c5":25,"f3h2":26,"h5f6":27,"h3g3":28,"e1a1":29,"g4h5":30,"c4c6":31,"d8d2":32,"b1b8":33,"f3a3":34,"h5e5":35,"a1a3":36,"e8f6":37,"h6b6":38,"d2d1q":39,"b2g7":40,"h4h7":41,"b1g1":42,"g5c5":43,"b4c3":44,"f7c7":45,"h2c2":46,"h1c1":47,"g4c8":48,"h5f5":49,"d3b5":50,"g5e6":51,"c7e8":52,"a1c2":53,"g4d7":54,"f2f5":55,"g2f4":56,"b5a4":57,"e6c4":58,"b5b8":59,"d4h8":60,"c3h8":61,"b8b7":62,"c6b5":63,"g5f6":64,"b6d5":65,"f1b1":66,"e5g4":67,"a2b1":68,"b6e3":69,"h3g4":70,"f6f2":71,"h6h5":72,"c7d7":73,"e8e6":74,"d4h4":75,"f4d3":76,"c7c8q":77,"g6h7":78,"a5h5":79,"c7a6":80,"e1e6":81,"e7e3":82,"c8d8":83,"a1c3":84,"h3f4":85,"h7e4":86,"d3b1":87,"f5d4":88,"g3h3":89,"c7g7":90,"b3b8":91,"h6g4":92,"h5g5":93,"d8g5":94,"f2e1q":95,"f8d8":96,"a3c4":97,"b7b8q":98,"b2c3":99,"g5f7":100,"a7a8r":101,"b5a6":102,"c5a4":103,"g4b4":104,"h7h3":105,"f1f3":106,"e7e8n":107,"g5g3":108,"b3h3":109,"d4b5":110,"h6e3":111,"c4c3":112,"f2a2":113,"b1b7":114,"b2c4":115,"g4g6":116,"c6e4":117,"a2a1n":118,"d8d6":119,"c3b5":120,"b8a8":121,"c3a3":122,"e3e5":123,"f1a1":124,"e7a7":125,"g8h6":126,"g6g5":127,"a3c2":128,"a6d3":129,"h6e6":130,"a5a2":131,"e2f3":132,"g7b7":133,"h1a1":134,"g8e6":135,"c7g3":136,"b6a6":137,"e5b2":138,"b3d5":139,"d3g6":140,"h7g5":141,"a7g1":142,"h8d4":143,"e4d5":144,"d6f5":145,"a8a6":146,"b2h8":147,"h6h2":148,"b7a6":149,"h1f2":150,"g3a3":151,"c8e8":152,"f1g2":153,"d8d4":154,"e2d1":155,"h8a8":156,"e1a5":157,"e5f3":158,"g5h6":159,"f4d6":160,"b7d5":161,"g6g1":162,"g7g8r":163,"a4d4":164,"e3e4":165,"f3h1":166,"d3d6":167,"g3g2":168,"h7h1":169,"f2h2":170,"d5c5":171,"d6b7":172,"e8b8":173,"h7c2":174,"a6b5":175,"c7c8n":176,"c5d3":177,"f2g4":178,"d8c6":179,"e6c7":180,"f5c8":181,"c3c5":182,"e8e1":183,"h4f2":184,"h7f5":185,"c7b5":186,"h6f5":187,"d7e8q":188,"f7g7":189,"e2a2":190,"c3h3":191,"g5g8":192,"f3h3":193,"a8h1":194,"b4d2":195,"b5a5":196,"f5f2":197,"d1d3":198,"e3d3":199,"c4e4":200,"a6b7":201,"b6a7":202,"c1h1":203,"c5e5":204,"c8b8":205,"f3e1":206,"a6a1":207,"a3c5":208,"a6a4":209,"d4e5":210,"f6a6":211,"a6c6":212,"d4d5":213,"b2d1":214,"d7b6":215,"a6c4":216,"f6g4":217,"c2c1q":218,"f6h8":219,"d7b8":220,"d5b5":221,"d7f7":222,"c6a4":223,"a1e5":224,"f8e6":225,"g8h7":226,"c7f7":227,"f3g3":228,"e4f4":229,"d1a4":230,"f4h4":231,"h3d3":232,"c5e4":233,"b4e7":234,"e3e2":235,"h7g8r":236,"c7b8":237,"a3b2":238,"c1g5":239,"f1d3":240,"h7b7":241,"g8f6":242,"d6e7":243,"f4f8":244,"d5d2":245,"b7a8n":246,"e1f1":247,"e1e7":248,"h8f6":249,"h1a8":250,"a1f6":251,"f5d5":252,"h8e8":253,"c2e1":254,"g2e4":255,"c5d7":256,"c4a6":257,"f1c4":258,"e7e2":259,"d6b5":260,"d6h6":261,"e7b7":262,"b6c8":263,"c2c6":264,"b7c5":265,"e4g4":266,"g2f1":267,"e2g2":268,"a7a5":269,"c6b4":270,"g4g5":271,"f8g8":272,"h8d8":273,"e2e5":274,"c5c3":275,"b1a2":276,"g8d8":277,"d7d8r":278,"c6e5":279,"f2f6":280,"g3f2":281,"g7g6":282,"b7b5":283,"b7b6":284,"g4a4":285,"g3g6":286,"d4e4":287,"e5c7":288,"a7a8":289,"h4b4":290,"b7c8q":291,"h6h3":292,"d1c2":293,"d8h8":294,"e3a3":295,"g1d1":296,"e7h7":297,"d2d1b":298,"b3a1":299,"f7g6":300,"c8g4":301,"d3f5":302,"d5c4":303,"h6g7":304,"g5e5":305,"f7f4":306,"f5f7":307,"c3e5":308,"e2g1":309,"f1f4":310,"b7d7":311,"c8b6":312,"f1a6":313,"g7g1":314,"b7a5":315,"e3d4":316,"c7c2":317,"e5e2":318,"g7a1":319,"a2a4":320,"e2h5":321,"c4c5":322,"e4e7":323,"c5c2":324,"c7h7":325,"b5a3":326,"b4e4":327,"d4a7":328,"e7f7":329,"d5a8":330,"c8c2":331,"f7f2":332,"a7d7":333,"h7h8q":334,"g4g8":335,"f2d2":336,"h5e8":337,"g4g3":338,"a1d1":339,"d4e2":340,"d4f2":341,"h5h8":342,"c2b1q":343,"a6g6":344,"g1g7":345,"d7d4":346,"d1h5":347,"b2c2":348,"e5g3":349,"f7g5":350,"b7b2":351,"c2a2":352,"c6f6":353,"e6f7":354,"e5e7":355,"g3b8":356,"f5b5":357,"e2g4":358,"b5d4":359,"h3c8":360,"c6d6":361,"a7a8q":362,"a1b2":363,"g2g1n":364,"b4c5":365,"c2c1":366,"c2a4":367,"e7d5":368,"b7a8q":369,"d4c5":370,"h7d7":371,"e2e8":372,"c7b7":373,"d2d1n":374,"b5e8":375,"a6a8":376,"f4b4":377,"e5a1":378,"b6b4":379,"h2h4":380,"g6f8":381,"a4a5":382,"a4e8":383,"e5g5":384,"h5f3":385,"f6h4":386,"d1g1":387,"a1a7":388,"b6f2":389,"c4h4":390,"d7f6":391,"a8e8":392,"f3h4":393,"h4g3":394,"e1b1":395,"f6h5":396,"d6b4":397,"h6f8":398,"e6b6":399,"e1c3":400,"d5d3":401,"g3h2":402,"g4h4":403,"a4d1":404,"b7b1":405,"f4f3":406,"c5d4":407,"c5b7":408,"a4a6":409,"h3f3":410,"c3e1":411,"c2e2":412,"f7e8":413,"d5a2":414,"c7d8q":415,"b2a1r":416,"d7e5":417,"e7f8r":418,"c7a8":419,"f6e7":420,"c3a2":421,"d4f5":422,"a7c7":423,"b1d1":424,"d1c1":425,"b2b8":426,"d4e6":427,"g8a2":428,"e5e3":429,"c5c4":430,"e7d7":431,"h8f8":432,"f8f1":433,"d1e1":434,"d7d8":435,"a6b6":436,"a3d6":437,"g5f4":438,"g3d3":439,"b6f6":440,"f7e8q":441,"h2h3":442,"d5b4":443,"c6c1":444,"f1d2":445,"b2d2":446,"h5d5":447,"e2a6":448,"e6e7":449,"b8b2":450,"g2d5":451,"f5h3":452,"b7d6":453,"c4e2":454,"e7c8":455,"e6e3":456,"f4a4":457,"g3h4":458,"b1f5":459,"e6g7":460,"f7e5":461,"e4c6":462,"h7d3":463,"g4d4":464,"f6e4":465,"d4d6":466,"d5e5":467,"a6f6":468,"b5c7":469,"g7e8":470,"d2d5":471,"f3e3":472,"d8e8":473,"f3d3":474,"c2a3":475,"b4c2":476,"g2h4":477,"a2c2":478,"h7h8r":479,"d4d8":480,"g2c6":481,"d5b7":482,"a4c2":483,"c7a7":484,"g1g5":485,"f8g6":486,"e5d4":487,"g5c1":488,"f3f4":489,"b4a2":490,"b3c1":491,"d3b2":492,"b5f5":493,"g5g7":494,"c5b3":495,"d8f8":496,"b5h5":497,"d2e4":498,"d6e6":499,"d6g3":500,"a8h8":501,"d3c2":502,"c4d2":503,"a1b3":504,"d2g2":505,"a4b4":506,"b2b3":507,"e6e4":508,"f5e3":509,"g6e8":510,"d1c3":511,"h1h6":512,"e6d4":513,"d8a8":514,"a6b4":515,"c6e6":516,"f3g1":517,"h6g8":518,"a1f1":519,"g6a6":520,"d1g4":521,"b7c8":522,"f8f4":523,"b2e2":524,"a6c7":525,"d6c8":526,"c4g8":527,"f5e5":528,"d2a2":529,"d7g4":530,"e2d4":531,"b4b6":532,"e6d5":533,"g2a8":534,"c1d2":535,"b2f6":536,"g5f3":537,"d7f5":538,"c3c7":539,"d3a3":540,"c3e2":541,"d3d5":542,"f4f6":543,"b5c4":544,"g8c4":545,"f8e8":546,"g2g7":547,"e3g2":548,"c3g7":549,"d5a5":550,"d2f2":551,"e7e5":552,"a4c4":553,"f5c5":554,"d7d1":555,"g8g4":556,"a8b8":557,"h8h7":558,"e1g3":559,"a4a7":560,"g8g7":561,"c4c2":562,"e6e2":563,"g8g3":564,"f8b8":565,"c7h2":566,"g2e1":567,"b3c5":568,"e5e1":569,"c3c6":570,"c3a1":571,"f7f6":572,"h8h1":573,"d3c3":574,"f6g7":575,"c8f8":576,"g6b6":577,"d5d1":578,"b2f2":579,"b2a1q":580,"c1c6":581,"h6g6":582,"b6c4":583,"g2h3":584,"d3h7":585,"d2d3":586,"c2h7":587,"d2e3":588,"a7f2":589,"h3h2":590,"c6c4":591,"g8g5":592,"h4e7":593,"e4g2":594,"b3b6":595,"c2e3":596,"b3a4":597,"f2e2":598,"h4f6":599,"f1g1":600,"b3a2":601,"e8c8":602,"e4b4":603,"c8h8":604,"h1h3":605,"h2f2":606,"f4g4":607,"a7b8q":608,"f8c8":609,"e4d4":610,"e5b8":611,"d5e6":612,"h5d1":613,"f8f3":614,"c6b7":615,"c5c6":616,"f6a1":617,"b1c3":618,"c2d2":619,"e8e5":620,"d2f4":621,"d4b4":622,"d4g7":623,"d8g8":624,"c1b2":625,"b4g4":626,"a3h3":627,"g3e2":628,"d2f3":629,"b7f7":630,"c6c3":631,"g3f3":632,"a3e3":633,"d8d7":634,"h4h6":635,"f7h6":636,"d4f4":637,"b3f3":638,"b5b7":639,"a8a5":640,"a5f5":641,"e3h3":642,"g2f1q":643,"g6d6":644,"e8c6":645,"b1b2":646,"h8h2":647,"b8b1":648,"g5g4":649,"d2d4":650,"h7a7":651,"b4f8":652,"e2d1n":653,"e8f7":654,"h5h7":655,"b2c1r":656,"g2b7":657,"a8g2":658,"d6f7":659,"f5g7":660,"c7c8r":661,"b3g8":662,"h1d1":663,"b6c6":664,"e6g6":665,"h5g6":666,"f6b6":667,"b4a6":668,"c6f3":669,"f5f8":670,"d3e5":671,"c7c3":672,"a8f3":673,"f8b4":674,"e5f6":675,"d8f7":676,"c6a8":677,"g7g5":678,"d2h6":679,"c3c1":680,"f3h5":681,"a5a7":682,"d4c4":683,"d1d8":684,"c5g5":685,"g1h1":686,"c3f3":687,"f7f8q":688,"f4d2":689,"d6b8":690,"b4e1":691,"c2c5":692,"f2d1":693,"a7a4":694,"b4d6":695,"b7a7":696,"g7h8q":697,"b6c7":698,"d3d4":699,"f1h1":700,"d1d5":701,"d5c6":702,"f4e2":703,"f6h6":704,"g8h8":705,"d2b4":706,"a7a6":707,"a5a4":708,"g1f1":709,"f2f4":710,"e3h6":711,"f6e5":712,"d2e2":713,"h8h3":714,"c3f6":715,"e4c5":716,"d3d7":717,"e4h7":718,"a8c8":719,"d3a6":720,"g3g8":721,"g7d4":722,"b2a4":723,"f2g1n":724,"a2b1q":725,"e5c3":726,"c1c5":727,"c5e6":728,"h6f7":729,"b3b2":730,"a5a8":731,"b2a1":732,"e7d8r":733,"b8b4":734,"d3e3":735,"g3g4":736,"f5f1":737,"f3a8":738,"f3f6":739,"b3d4":740,"f2h3":741,"a6a3":742,"d8e6":743,"c2b4":744,"a6e6":745,"g7g8":746,"g2b2":747,"f4g5":748,"f4h5":749,"f1f5":750,"d4g4":751,"c7c6":752,"b8b6":753,"e2g3":754,"a2f2":755,"e4e6":756,"e6g5":757,"h6h8":758,"f7b7":759,"g7e6":760,"h2h1":761,"c6d7":762,"c6c5":763,"a4b3":764,"b8c7":765,"e7a3":766,"b7b8r":767,"f6h7":768,"f6d4":769,"a2g8":770,"a2a3":771,"g6d3":772,"c1f4":773,"a8a2":774,"g1c5":775,"c2d4":776,"c4b2":777,"d1b1":778,"c2b1":779,"b5b6":780,"e6e5":781,"e4b1":782,"c3d4":783,"g1c1":784,"f2d3":785,"f7d7":786,"h7h5":787,"b3b5":788,"g1f2":789,"c4g4":790,"a2a8":791,"g6f4":792,"f8f5":793,"e7d6":794,"g3h5":795,"e8e7":796,"c7c5":797,"d4c3":798,"f4e5":799,"f7h5":800,"b6e6":801,"c1e3":802,"f7g8":803,"g8d5":804,"d6c4":805,"e2d2":806,"a5d2":807,"c4a2":808,"b5a7":809,"g5d5":810,"a5a1":811,"h6d2":812,"f2e1":813,"a4e4":814,"b6b7":815,"e1c1":816,"c6b6":817,"c4d3":818,"a3b4":819,"a8a4":820,"b5g5":821,"g7a7":822,"a1h1":823,"e3g3":824,"c3e3":825,"b3d1":826,"g4h3":827,"a7h7":828,"b3e3":829,"e3g1":830,"h3f5":831,"b5b3":832,"e8g8":833,"f1e1":834,"a8d8":835,"f6e6":836,"g2f2":837,"d7b5":838,"a3c3":839,"a7a1":840,"h2h1n":841,"a2a1b":842,"e2f1":843,"g3f4":844,"c5f5":845,"d7c7":846,"c7e6":847,"e7e1":848,"d5f3":849,"c6a6":850,"b8e5":851,"f4g3":852,"f6f5":853,"c4c8":854,"a2c3":855,"c6c8":856,"e2e7":857,"a5e5":858,"a1a5":859,"d4g1":860,"e7c5":861,"a2d5":862,"a5c5":863,"d5d7":864,"e2d3":865,"b8g3":866,"a2h2":867,"h7g6":868,"e3f2":869,"d7a4":870,"f5g3":871,"c2c1n":872,"a4a3":873,"g2h1":874,"c3a5":875,"b6d8":876,"f2g1":877,"h7f6":878,"e1f3":879,"b4a4":880,"f5g4":881,"a8g8":882,"b8b3":883,"c5c7":884,"e3a7":885,"e2c2":886,"g6f6":887,"f3e4":888,"e8f8":889,"d5f4":890,"h1f3":891,"b8a7":892,"b2g2":893,"g7h6":894,"d6e8":895,"a1a4":896,"a4a1":897,"b4b5":898,"d4c6":899,"e2b2":900,"a3a4":901,"a3a6":902,"g1b6":903,"b2b6":904,"f3b3":905,"e2e1q":906,"h7h8b":907,"d2a5":908,"c6c7":909,"e1d2":910,"b3e6":911,"c6h6":912,"f2h1":913,"f2e3":914,"g5g1":915,"e1d3":916,"d6d8":917,"g8g2":918,"a8b6":919,"h8g8":920,"e2f1q":921,"a8f8":922,"e5h5":923,"c8e7":924,"e8a8":925,"d6e4":926,"b5f1":927,"b6h6":928,"b8c8":929,"e4e5":930,"e5b5":931,"f5e7":932,"e4d3":933,"e5c4":934,"h3h6":935,"d1a1":936,"e2c4":937,"g7e5":938,"g6g4":939,"c3b3":940,"h2g1":941,"a8a1":942,"d3e1":943,"c5d6":944,"g4d1":945,"a6b8":946,"a5d8":947,"h3g5":948,"f3e5":949,"f5d6":950,"g1e3":951,"f1f8":952,"e1h4":953,"d4b2":954,"d5e3":955,"e3f1":956,"h8c8":957,"e3b3":958,"b6a5":959,"h5h2":960,"h4g6":961,"e2e1":962,"e4f5":963,"c1e1":964,"a2a1r":965,"e3e1":966,"a6a2":967,"e4a8":968,"d8c7":969,"c4b6":970,"e2c3":971,"b6d4":972,"d7d3":973,"b2b1":974,"c4d6":975,"a7a8n":976,"b3a3":977,"c7c4":978,"b7h1":979,"h5g4":980,"a3a8":981,"f5h7":982,"c7e5":983,"h7e7":984,"d1d7":985,"f3c6":986,"g6e5":987,"g6f5":988,"a4b6":989,"e2f2":990,"d3b3":991,"d5c7":992,"f2d4":993,"f2f8":994,"e5d3":995,"d6d7":996,"a7e7":997,"f3f1":998,"h2g1q":999,"h7h2":1000,"e7e4":1001,"a5g5":1002,"c7c1":1003,"f2f1":1004,"a7a2":1005,"f5h6":1006,"d3d1":1007,"b8h8":1008,"b3a5":1009,"a5c6":1010,"c2g2":1011,"a2a1":1012,"a8a7":1013,"f2f3":1014,"g8c8":1015,"h3g1":1016,"g3c3":1017,"g2c2":1018,"c8c5":1019,"d1e2":1020,"a2a7":1021,"b8a6":1022,"a6e2":1023,"e3e8":1024,"a4b2":1025,"h6a6":1026,"h7h4":1027,"h8e5":1028,"f7f8n":1029,"b8e8":1030,"e7e8q":1031,"e7e8r":1032,"g4e4":1033,"a1a6":1034,"g4h2":1035,"e5e4":1036,"h6f6":1037,"b8f8":1038,"h5c5":1039,"c2c4":1040,"f8h8":1041,"b2h2":1042,"e4f6":1043,"h2g2":1044,"h4f4":1045,"h8h6":1046,"f7a2":1047,"c7d6":1048,"d7d8q":1049,"f7c4":1050,"e5h8":1051,"g4f6":1052,"g6h8":1053,"c6d4":1054,"f1e2":1055,"b2b1r":1056,"f3f2":1057,"c8c3":1058,"d7d2":1059,"h2h7":1060,"e6c6":1061,"d7c8q":1062,"c3a4":1063,"f5c2":1064,"a5d5":1065,"c5a5":1066,"f5e4":1067,"d5g8":1068,"e1h1":1069,"a5b3":1070,"d3d2":1071,"g5h5":1072,"g2a2":1073,"g5a5":1074,"e4c2":1075,"e6h6":1076,"h6d6":1077,"c4b5":1078,"d6f4":1079,"d3d8":1080,"d3c4":1081,"g1h3":1082,"h4d8":1083,"g7b2":1084,"g1a7":1085,"c7e7":1086,"e4f3":1087,"b4b2":1088,"g5e7":1089,"e5e6":1090,"c5b4":1091,"h5g3":1092,"a2c1":1093,"e5f5":1094,"a8e4":1095,"g1b1":1096,"f7f8":1097,"d6a3":1098,"c7c8":1099,"a6a5":1100,"c3c8":1101,"h4g4":1102,"b4b3":1103,"g8f8":1104,"a5e1":1105,"d8c8":1106,"g8e7":1107,"f8f6":1108,"c5a7":1109,"c7a5":1110,"h1g1":1111,"b1b4":1112,"f3f5":1113,"b2c1q":1114,"b6b3":1115,"g3e5":1116,"h4e1":1117,"b3c2":1118,"e4g5":1119,"c7b6":1120,"g2h2":1121,"b1e1":1122,"b7a8":1123,"b4d5":1124,"f5f4":1125,"h4h2":1126,"d2h2":1127,"g4g1":1128,"e4c4":1129,"a7e3":1130,"d5e4":1131,"h2c7":1132,"b5d6":1133,"c4e6":1134,"c6e7":1135,"h6h4":1136,"f7f8b":1137,"c1c8":1138,"b7e4":1139,"e6b3":1140,"h5b5":1141,"g4e5":1142,"g2f3":1143,"h3h4":1144,"g3e1":1145,"h6f4":1146,"d4a4":1147,"h8g7":1148,"h3f1":1149,"b6g1":1150,"a5b4":1151,"f4h3":1152,"c4b4":1153,"e3c2":1154,"d7b7":1155,"e8b5":1156,"f3d4":1157,"c3d1":1158,"f2b2":1159,"g5g6":1160,"b6b1":1161,"c2g6":1162,"h2f3":1163,"a4b5":1164,"c5b5":1165,"g2g1q":1166,"b2a3":1167,"d3h3":1168,"c8e6":1169,"c1c7":1170,"h7h8n":1171,"c8c7":1172,"h7g8q":1173,"c8f5":1174,"e6f6":1175,"d2b1":1176,"b8h2":1177,"h4h3":1178,"a2a6":1179,"h8g6":1180,"e4c3":1181,"b5d5":1182,"c4c1":1183,"c6g6":1184,"h8f7":1185,"d1d4":1186,"c1c3":1187,"g6h5":1188,"a3b1":1189,"b5e5":1190,"b6b2":1191,"b8d8":1192,"d6d2":1193,"g6c2":1194,"d7h3":1195,"b2c1":1196,"c6a7":1197,"b8c6":1198,"f5h5":1199,"c2f2":1200,"e1d1":1201,"d6c7":1202,"f8a3":1203,"f6f4":1204,"h8h4":1205,"e4d2":1206,"e7g5":1207,"h1g2":1208,"h1h8":1209,"a1g7":1210,"e7e8":1211,"c5f8":1212,"a7c6":1213,"e8h5":1214,"g2g5":1215,"e1g2":1216,"d1f1":1217,"a2g2":1218,"e6e1":1219,"f6g5":1220,"g4g7":1221,"d6f8":1222,"h5h4":1223,"d5d8":1224,"g4f2":1225,"e5f7":1226,"e1e5":1227,"f4f5":1228,"e5a5":1229,"g2g4":1230,"g1d4":1231,"b4b8":1232,"g3e3":1233,"e3f3":1234,"g6c6":1235,"g3e4":1236,"e4h1":1237,"d2g5":1238,"h2h1r":1239,"b5d3":1240,"e2f4":1241,"c2d1q":1242,"e1e4":1243,"a1e1":1244,"h6g5":1245,"a8b7":1246,"d3f4":1247,"c4d5":1248,"b3g3":1249,"e4a4":1250,"g2e2":1251,"f4d5":1252,"d1e3":1253,"e5f4":1254,"e6f4":1255,"e8d6":1256,"g7g3":1257,"c1b3":1258,"b4d4":1259,"c2h2":1260,"d8b8":1261,"b2d3":1262,"h2h8":1263,"a2b3":1264,"a7b6":1265,"c5b6":1266,"e3d1":1267,"e6e8":1268,"e3f5":1269,"h4h5":1270,"c1c2":1271,"g6g7":1272,"d5h5":1273,"d7c6":1274,"g5d8":1275,"e8h8":1276,"f6f7":1277,"b6g6":1278,"c3g3":1279,"d3g3":1280,"a2b2":1281,"c2e4":1282,"f7e7":1283,"h5h1":1284,"f8h7":1285,"h7h8":1286,"h6h1":1287,"f2a7":1288,"h4g5":1289,"h1h2":1290,"d8d3":1291,"d5f5":1292,"f2f1b":1293,"b6a4":1294,"c3d5":1295,"f1f6":1296,"a4a2":1297,"e8c7":1298,"e4e2":1299,"d4b3":1300,"h3e3":1301,"c4f7":1302,"a1c1":1303,"c3b1":1304,"c7d8":1305,"a2d2":1306,"c1e2":1307,"g6e7":1308,"d7e8":1309,"e6f8":1310,"a3f8":1311,"f4e3":1312,"f7e6":1313,"h4f5":1314,"c5e7":1315,"e1c2":1316,"d2c2":1317,"c5a6":1318,"f7h7":1319,"e2e4":1320,"a3a1":1321,"e3c4":1322,"g5e4":1323,"d1f3":1324,"d7f8":1325,"h2h6":1326,"f6f1":1327,"e3e6":1328,"c1f1":1329,"h1b1":1330,"f3f7":1331,"e4h4":1332,"a5a6":1333,"c6h1":1334,"b7g2":1335,"f5f3":1336,"d8d1":1337,"b1e4":1338,"d2e1r":1339,"c4b3":1340,"a3g3":1341,"h1h5":1342,"c6d5":1343,"f7f3":1344,"f4c4":1345,"b7c6":1346,"d2d7":1347,"e3f4":1348,"d4a1":1349,"c6b8":1350,"f5d7":1351,"a6a7":1352,"h4h8":1353,"a6c5":1354,"h4f3":1355,"f8f7":1356,"g8a8":1357,"f8g7":1358,"e5g7":1359,"g7f8q":1360,"f1b5":1361,"a7a3":1362,"c6d8":1363,"e6d8":1364,"d5b3":1365,"c3e4":1366,"b8b5":1367,"g5h3":1368,"a4f4":1369,"b6d7":1370,"f3c3":1371,"e5d5":1372,"f1d1":1373,"d6a6":1374,"e7e6":1375,"a7g7":1376,"e4d6":1377,"g6g3":1378,"f5e6":1379,"h4e4":1380,"f6d6":1381,"c4c7":1382,"b3b4":1383,"d8h4":1384,"a8c7":1385,"f2g2":1386,"f5h4":1387,"d8f6":1388,"f3b7":1389,"a6c8":1390,"b8d6":1391,"a5b5":1392,"e2h2":1393,"b3d3":1394,"g7h8":1395,"b4a3":1396,"b1b6":1397,"g4f5":1398,"e8d8":1399,"b4b1":1400,"d4c2":1401,"a7b7":1402,"d1b2":1403,"f4f1":1404,"c4d4":1405,"f4e6":1406,"c4a5":1407,"c8a7":1408,"g5d2":1409,"g2g6":1410,"e2b5":1411,"h3h7":1412,"b1a3":1413,"e5d6":1414,"c2f5":1415,"f7f5":1416,"c2a1":1417,"c2b2":1418,"g5h7":1419,"h4g2":1420,"d6c6":1421,"b4h4":1422,"a5c3":1423,"d5e7":1424,"g7f6":1425,"a2e2":1426,"c3b2":1427,"a4h4":1428,"a7b8":1429,"b4c4":1430,"c1h6":1431,"e2e3":1432,"h1d5":1433,"g1f3":1434,"g3c7":1435,"d8d5":1436,"g3g5":1437,"b6a8":1438,"h2b2":1439,"b4f4":1440,"f5d3":1441,"h5e2":1442,"d3f2":1443,"a5b6":1444,"e6g4":1445,"d8b6":1446,"g4h6":1447,"c6c2":1448,"b2b1q":1449,"b4d3":1450,"e2e6":1451,"b7b8n":1452,"d6e5":1453,"h1f1":1454,"e1b4":1455,"e1e3":1456,"c4a3":1457,"f8h6":1458,"f2f1q":1459,"h2a2":1460,"g7f7":1461,"g3b3":1462,"h1g3":1463,"f4b8":1464,"a2f7":1465,"d2c1":1466,"d7d6":1467,"c4a4":1468,"c1d3":1469,"a3c1":1470,"e1f2":1471,"d4d1":1472,"h5h3":1473,"c3c4":1474,"h7c7":1475,"h1h4":1476,"g7c3":1477,"h7f7":1478,"h3h8":1479,"c8c4":1480,"c4f1":1481,"g1h2":1482,"d2e1q":1483,"d3c1":1484,"g4e6":1485,"e8e4":1486,"e5d7":1487,"b1h7":1488,"d5g2":1489,"e7f8":1490,"e6c8":1491,"d2d1":1492,"f1h2":1493,"c8d7":1494,"g5g2":1495,"h1c6":1496,"h3g2":1497,"g8f7":1498,"f7h8":1499,"d4b6":1500,"e4e1":1501,"f3d1":1502,"c5e3":1503,"g6h6":1504,"f4d4":1505,"a3f3":1506,"h7g7":1507,"c8b7":1508,"g1g2":1509,"f6g8":1510,"a5b7":1511,"c6e8":1512,"b5b2":1513,"a7b5":1514,"a3d3":1515,"g3f1":1516,"a3a7":1517,"d1d6":1518,"a4a8":1519,"c2c3":1520,"e4g6":1521,"a6h6":1522,"e8g7":1523,"g1g6":1524,"f5g5":1525,"f1c1":1526,"b5e2":1527,"h2h1q":1528,"c7d5":1529,"h2g3":1530,"c5h5":1531,"b5c6":1532,"f5g6":1533,"e3c3":1534,"b5c5":1535,"g2g1":1536,"d6g6":1537,"f5a5":1538,"f8d7":1539,"c1g1":1540,"h2f4":1541,"g7f5":1542,"g7g8q":1543,"c5c1":1544,"h2d2":1545,"a3e7":1546,"d4d2":1547,"e8g6":1548,"g6h4":1549,"e2f1n":1550,"e5h2":1551,"e8e2":1552,"d1b3":1553,"d6d5":1554,"e2d1q":1555,"f2h4":1556,"f6e8":1557,"b2b5":1558,"h4a4":1559,"d2c4":1560,"f7d8":1561,"d1d2":1562,"d6b6":1563,"f5f6":1564,"h3d7":1565,"f3g5":1566,"f1h3":1567,"d3e4":1568,"a6f1":1569,"g3g7":1570,"d2b2":1571,"f7b3":1572,"h7f8":1573,"d2b3":1574,"c4f4":1575,"c6a5":1576,"h7b1":1577,"f5b1":1578,"e6c5":1579,"e6a6":1580,"g1g4":1581,"b6c5":1582,"f1g3":1583,"b8d7":1584,"a8a3":1585,"e5g6":1586,"b2a2":1587,"d4f3":1588,"f8d6":1589,"c5d5":1590,"g8g1":1591,"b7b4":1592,"g5h4":1593,"c1c4":1594,"h2h5":1595,"f6c6":1596,"g7h5":1597,"d2c3":1598,"e6f5":1599,"d7a7":1600,"b5b1":1601,"e6d7":1602,"d6d3":1603,"f4f7":1604,"b1b5":1605,"b2b4":1606,"e7c6":1607,"a4d7":1608,"f4g6":1609,"c4e5":1610,"d5h1":1611,"e1g1":1612,"d6h2":1613,"b3d2":1614,"c3d3":1615,"g1g8":1616,"g2g8":1617,"c3c2":1618,"f2c5":1619,"a2c4":1620,"g1e1":1621,"c5a3":1622,"d7d5":1623,"h3a3":1624,"d8a5":1625,"f1e3":1626,"e7g6":1627,"b3b1":1628,"c8h3":1629,"c3d2":1630,"e6d6":1631,"g4f3":1632,"a7f7":1633,"h1e4":1634,"f4h6":1635,"h5f4":1636,"b7e7":1637,"c2d1":1638,"e8e3":1639,"f7f1":1640,"f6f3":1641,"d8b7":1642,"f3g2":1643,"f2c2":1644,"d4f6":1645,"e3e7":1646,"g3d6":1647,"d7h7":1648,"a5c7":1649,"c5c8":1650,"c4e3":1651,"b1b3":1652,"b7f3":1653,"e2e1b":1654,"d6f6":1655,"d5b6":1656,"e8d7":1657,"b1d2":1658,"f6d7":1659,"e3g5":1660,"b1d3":1661,"f4g2":1662,"h8a1":1663,"d2d1r":1664,"e4b7":1665,"h7h6":1666,"g7f8r":1667,"e7g7":1668,"e3b6":1669,"b6b8":1670,"e5c6":1671,"b3c4":1672,"d5g5":1673,"g7d7":1674,"d4e3":1675,"h8b8":1676,"b4c6":1677,"e7f5":1678,"f2f1n":1679,"a1a2":1680,"g8b8":1681,"f2b6":1682,"a5a3":1683,"g4e3":1684,"b1g6":1685,"d7e7":1686,"g1g3":1687,"b1c1":1688,"h5f7":1689,"g3g1":1690,"b5b4":1691,"h4d4":1692,"g7h7":1693,"h6c6":1694,"a3a2":1695,"g4c4":1696,"g3f5":1697,"b4b7":1698,"c2c7":1699,"h2g4":1700,"d5c3":1701,"d7e8r":1702,"b2d4":1703,"a2b4":1704,"a3b3":1705,"g6g8":1706,"b7d8":1707,"f8a8":1708,"b1a1":1709,"b3f7":1710,"d1h1":1711,"c3b4":1712,"a3a5":1713,"c1a3":1714,"a4c6":1715,"a3b5":1716,"e1e2":1717,"g7c7":1718,"h5g7":1719,"f2f7":1720,"a7c5":1721,"a5c4":1722,"a8c6":1723,"g8b3":1724,"c5g1":1725,"c1a1":1726,"g7g2":1727,"f4e4":1728,"b2b1b":1729,"c8g8":1730,"a7d4":1731,"e7g8":1732,"d2d8":1733,"f4f2":1734,"g2d2":1735,"b6d6":1736,"c1d1":1737,"c8a6":1738,"a4c3":1739,"h2e2":1740,"b8g8":1741,"c2b3":1742,"d2c1q":1743,"g7f8":1744,"a6d6":1745,"e3c1":1746,"c7f4":1747,"f7d5":1748,"g2h1q":1749,"d6c5":1750,"h6h7":1751,"e4f2":1752,"h1e1":1753,"a7c8":1754,"c8a8":1755,"a1d4":1756,"f4h2":1757,"b2e5":1758,"h5a5":1759,"f4c1":1760,"d7g7":1761,"b7h7":1762,"h1h7":1763,"f7d6":1764,"d7e6":1765,"h3h1":1766,"f2g1q":1767,"h3b3":1768,"d3b4":1769,"g6e6":1770,"f8f2":1771,"g2g3":1772,"h6c1":1773,"c2c1r":1774,"d2d6":1775,"h2f1":1776,"h8h5":1777,"f3f8":1778,"e1e8":1779,"c8d6":1780,"d8e7":1781,"d3e2":1782,"d6d4":1783,"a1h8":1784,"e7d8q":1785,"f7f8r":1786,"g6f7":1787,"g2e3":1788,"b5c3":1789,"h3h5":1790,"e4g3":1791,"b7b3":1792,"f1f7":1793,"c8c1":1794,"h1b7":1795,"g7e7":1796,"d4d7":1797,"g5f5":1798,"c1a2":1799,"b1c2":1800,"d2f1":1801,"g5b5":1802,"f7a7":1803,"d5d4":1804,"b1h1":1805,"e3c5":1806,"c8c6":1807,"g1a1":1808,"d2e1":1809,"e6g8":1810,"f6d8":1811,"e5e8":1812,"d3f1":1813,"b1f1":1814,"g5e3":1815,"f2e4":1816,"e4e8":1817,"h8c3":1818,"g4f4":1819,"g7g4":1820,"h2b8":1821,"e2c1":1822,"h2d6":1823,"f8e7":1824,"c1b1":1825,"e7f8q":1826,"b7g7":1827,"f4c7":1828,"d5f7":1829,"d3c5":1830,"a1g1":1831,"b2b1n":1832,"e7f6":1833,"h3f2":1834,"e3d2":1835,"e6a2":1836,"f2g3":1837,"e3g4":1838,"f6d5":1839,"e7b4":1840,"e6h3":1841,"f3d5":1842,"e7c7":1843,"h4c4":1844,"a4g4":1845,"b7c7":1846,"g6b1":1847,"g7g8n":1848,"f3d2":1849,"h3c3":1850,"d4d3":1851,"f3e2":1852,"e5c5":1853,"c5f2":1854,"a1b1":1855,"e2e1r":1856,"e7d8":1857,"f8c5":1858,"d5f6":1859,"g8g6":1860,"h3e6":1861,"b3b7":1862,"d7c8":1863,"h4h1":1864,"d5d6":1865,"h2e5":1866,"g6g2":1867,"g3h1":1868,"g4g2":1869,"f7g8q":1870,"c2c8":1871,"g8e8":1872,"c7d8r":1873,"b7b8":1874,"a2a1q":1875,"c2d3":1876,"e3d5":1877,"h8b2":1878,"d6d1":1879,"c7b8q":1880,"a2a5":1881,"b3c3":1882,"f3g4":1883}');async function r(e){const t=new onnx.InferenceSession;return await t.loadModel(e),t}function a(e){return[e[1]-1,e.charCodeAt(0)-97]}let o=null;async function n(e,t){const s=function(e,t){let s=new Array(13).fill([]).map((()=>new Array(8).fill([]).map((()=>new Array(8).fill(0)))));for(const t of e)for(const e of t){if(null===e)continue;const{type:t,color:i,square:r}=e,[o,n]=a(r);s[["p","n","b","r","q","k"].indexOf(t)+6*["w","b"].indexOf(i)][o][n]=1}for(const e of t){const{to:t}=e,[i,r]=a(t);s[12][i][r]=1}return s}(e.board(),e.moves({verbose:!0})),r=new onnx.Tensor(s.flat(2),"float32",[1,13,8,8]),n=(await t.run([r])).values().next().value.data,h=Array.from(n).map((e=>Math.exp(e))),c=h.reduce(((e,t)=>e+t),0),d=h.map((e=>e/c));return o||function(){o={};for(const e in i)o[i[e]]=e}(),d.map(((e,t)=>[e,t])).sort(((e,t)=>t[0]-e[0])).map((e=>o[e[1]]))}},410:(e,t,s)=>{s.d(t,{qi:()=>g,o$:()=>p,Ve:()=>w,n1:()=>f,TJ:()=>v});const i="8/8/8/8/8/8/8/8";class r{constructor(e=i){this.squares=new Array(64).fill(null),this.setFen(e)}setFen(e=i){const t=e.replace(/^\s*/,"").replace(/\s*$/,"").split(/\/|\s/);for(let e=0;e<8;e++){const s=t[7-e].replace(/\d/g,(e=>{const t=parseInt(e);let s="";for(let e=0;e<t;e++)s+="-";return s}));for(let t=0;t<8;t++){const i=s.substring(t,t+1);let r=null;"-"!==i&&(r=i.toUpperCase()===i?`w${i.toLowerCase()}`:`b${i}`),this.squares[8*e+t]=r}}}getFen(){let e=new Array(8).fill("");for(let t=0;t<8;t++){let s=0;for(let i=0;i<8;i++){const r=this.squares[8*t+i];if(r){s>0&&(e[7-t]+=s,s=0);const i=r.substring(0,1),a=r.substring(1,2);e[7-t]+="w"===i?a.toUpperCase():a}else s++}s>0&&(e[7-t]+=s,s=0)}return e.join("/")}getPieces(e=void 0,t=void 0,s=["k","q","r","b","n","p"]){const i=[];for(let s=0;s<64;s++){const a=this.squares[s];if(a){const o=a.charAt(1),n=a.charAt(0),h=r.indexToSquare(s);if(t&&t!==o||e&&e!==n)continue;i.push({name:o,type:o,color:n,position:h,square:h})}}return s&&i.sort(((e,t)=>s.indexOf(e.name)-s.indexOf(t.name))),i}movePiece(e,t){this.squares[r.squareToIndex(e)]?(this.squares[r.squareToIndex(t)]=this.squares[r.squareToIndex(e)],this.squares[r.squareToIndex(e)]=null):console.warn("no piece on",e)}setPiece(e,t){this.squares[r.squareToIndex(e)]=t}getPiece(e){return this.squares[r.squareToIndex(e)]}static squareToIndex(e){const t=r.squareToCoordinates(e);return t[0]+8*t[1]}static indexToSquare(e){return this.coordinatesToSquare([Math.floor(e%8),e/8])}static squareToCoordinates(e){return[e.charCodeAt(0)-97,e.charCodeAt(1)-49]}static coordinatesToSquare(e){return String.fromCharCode(e[0]+97)+String.fromCharCode(e[1]+49)}toString(){return this.getFen()}clone(){const e=new r;return e.squares=this.squares.slice(0),e}}class a{constructor(){this.position=new r,this.orientation=void 0,this.inputWhiteEnabled=!1,this.inputBlackEnabled=!1,this.squareSelectEnabled=!1,this.moveInputCallback=null,this.extensionPoints={},this.moveInputProcess=Promise.resolve()}inputEnabled(){return this.inputWhiteEnabled||this.inputBlackEnabled}invokeExtensionPoints(e,t={}){const s=this.extensionPoints[e],i=Object.assign({},t);i.extensionPoint=e;let r=!0;if(s)for(const e of s)!1===e(i)&&(r=!1);return r}}var o=s(892),n=s(521),h=s(547);class c{constructor(){this.queue=[],this.workingOnPromise=!1,this.stop=!1}async enqueue(e){return new Promise(((t,s)=>{this.queue.push({promise:e,resolve:t,reject:s}),this.dequeue()}))}dequeue(){if(this.workingOnPromise)return;if(this.stop)return this.queue=[],void(this.stop=!1);const e=this.queue.shift();if(e){try{this.workingOnPromise=!0,e.promise().then((t=>{this.workingOnPromise=!1,e.resolve(t),this.dequeue()})).catch((t=>{this.workingOnPromise=!1,e.reject(t),this.dequeue()}))}catch(t){this.workingOnPromise=!1,e.reject(t),this.dequeue()}return!0}}destroy(){this.stop=!0}}class d{constructor(e,t,s,i,r){this.view=e,t&&s?(this.animatedElements=this.createAnimation(t.squares,s.squares),this.duration=i,this.callback=r,this.frameHandle=requestAnimationFrame(this.animationStep.bind(this))):console.error("fromPosition",t,"toPosition",s),this.view.positionsAnimationTask=h.A.createTask(),this.view.chessboard.state.invokeExtensionPoints(n.x.animation,{type:"start"})}static seekChanges(e,t){const s=[],i=[],r=[];for(let r=0;r<64;r++){const a=e[r],o=t[r];o!==a&&(o&&s.push({piece:o,index:r}),a&&i.push({piece:a,index:r}))}return s.forEach((e=>{let t=8,s=null;i.forEach((i=>{if(e.piece===i.piece){const r=d.squareDistance(e.index,i.index);r<t&&(s=i,t=r)}})),s?(i.splice(i.indexOf(s),1),r.push({type:0,piece:e.piece,atIndex:s.index,toIndex:e.index})):r.push({type:1,piece:e.piece,atIndex:e.index})})),i.forEach((e=>{r.push({type:2,piece:e.piece,atIndex:e.index})})),r}createAnimation(e,t){const s=d.seekChanges(e,t),i=[];return s.forEach((e=>{const t={type:e.type};switch(e.type){case 0:t.element=this.view.getPieceElement(r.indexToSquare(e.atIndex)),t.element.parentNode.appendChild(t.element),t.atPoint=this.view.indexToPoint(e.atIndex),t.toPoint=this.view.indexToPoint(e.toIndex);break;case 1:t.element=this.view.drawPieceOnSquare(r.indexToSquare(e.atIndex),e.piece),t.element.style.opacity=0;break;case 2:t.element=this.view.getPieceElement(r.indexToSquare(e.atIndex))}i.push(t)})),i}animationStep(e){if(!this.view||!this.view.chessboard.state)return;this.startTime||(this.startTime=e);const t=e-this.startTime;if(!(t<=this.duration))return cancelAnimationFrame(this.frameHandle),this.animatedElements.forEach((e=>{2===e.type&&o.B.removeElement(e.element)})),this.view.positionsAnimationTask.resolve(),this.view.chessboard.state.invokeExtensionPoints(n.x.animation,{type:"end"}),void this.callback();this.frameHandle=requestAnimationFrame(this.animationStep.bind(this));const s=Math.min(1,t/this.duration);let i=s<.5?2*s*s:(4-2*s)*s-1;(isNaN(i)||i>.99)&&(i=1),this.animatedElements.forEach((e=>{if(e.element)switch(e.type){case 0:e.element.transform.baseVal.removeItem(0);const t=this.view.svg.createSVGTransform();t.setTranslate(e.atPoint.x+(e.toPoint.x-e.atPoint.x)*i,e.atPoint.y+(e.toPoint.y-e.atPoint.y)*i),e.element.transform.baseVal.appendItem(t);break;case 1:e.element.style.opacity=Math.round(100*i)/100;break;case 2:e.element.style.opacity=Math.round(100*(1-i))/100}else console.warn("animatedItem has no element",e)})),this.view.chessboard.state.invokeExtensionPoints(n.x.animation,{type:"frame",progress:i})}static squareDistance(e,t){const s=e%8,i=Math.floor(e/8),r=t%8,a=Math.floor(t/8);return Math.max(Math.abs(a-i),Math.abs(r-s))}}class l extends c{constructor(e){super(),this.chessboard=e}async enqueuePositionChange(e,t,s){return e.getFen()===t.getFen()?Promise.resolve():super.enqueue((()=>new Promise((i=>{let r=s?this.chessboard.props.style.animationDuration:0;this.queue.length>0&&(r/=1+Math.pow(this.queue.length/5,2)),new d(this.chessboard.view,e,t,s?r:0,(()=>{this.chessboard.view&&this.chessboard.view.redrawPieces(t.squares),i()}))}))))}async enqueueTurnBoard(e,t,s){return super.enqueue((()=>new Promise((a=>{const o=new r(i);let n=s?this.chessboard.props.style.animationDuration:0;this.queue.length>0&&(n/=1+Math.pow(this.queue.length/5,2)),new d(this.chessboard.view,e,o,s?n:0,(()=>{this.chessboard.state.orientation=t,this.chessboard.view.redrawBoard(),this.chessboard.view.redrawPieces(o.squares),new d(this.chessboard.view,o,e,s?n:0,(()=>{this.chessboard.view.redrawPieces(e.squares),a()}))}))}))))}}const u={waitForInputStart:"waitForInputStart",pieceClickedThreshold:"pieceClickedThreshold",clickTo:"clickTo",secondClickThreshold:"secondClickThreshold",dragTo:"dragTo",clickDragTo:"clickDragTo",moveDone:"moveDone",reset:"reset"};class b{constructor(e){this.view=e,this.chessboard=e.chessboard,this.moveInputState=null,this.fromSquare=null,this.toSquare=null,this.setMoveInputState(u.waitForInputStart)}moveInputStartedCallback(e){const t=this.view.moveInputStartedCallback(e);return t&&(this.chessboard.state.moveInputProcess=h.A.createTask(),this.chessboard.state.moveInputProcess.then((e=>{this.moveInputState!==u.waitForInputStart&&this.moveInputState!==u.moveDone||this.view.moveInputFinishedCallback(this.fromSquare,this.toSquare,e)}))),t}movingOverSquareCallback(e,t){this.view.movingOverSquareCallback(e,t)}validateMoveInputCallback(e,t){const s=this.view.validateMoveInputCallback(e,t);return this.chessboard.state.moveInputProcess.resolve(s),s}moveInputCanceledCallback(e,t,s){this.view.moveInputCanceledCallback(e,t,s),this.chessboard.state.moveInputProcess.resolve()}setMoveInputState(e,t=void 0){const s=this.moveInputState;switch(this.moveInputState=e,e){case u.waitForInputStart:break;case u.pieceClickedThreshold:if(u.waitForInputStart!==s&&u.clickTo!==s)throw new Error("moveInputState");if(this.pointerMoveListener&&(removeEventListener(this.pointerMoveListener.type,this.pointerMoveListener),this.pointerMoveListener=null),this.pointerUpListener&&(removeEventListener(this.pointerUpListener.type,this.pointerUpListener),this.pointerUpListener=null),this.fromSquare=t.square,this.toSquare=null,this.movedPiece=t.piece,this.startPoint=t.point,this.pointerMoveListener||this.pointerUpListener)throw Error("94ad0c");if("mousedown"===t.type)this.pointerMoveListener=this.onPointerMove.bind(this),this.pointerMoveListener.type="mousemove",addEventListener("mousemove",this.pointerMoveListener),this.pointerUpListener=this.onPointerUp.bind(this),this.pointerUpListener.type="mouseup",addEventListener("mouseup",this.pointerUpListener);else{if("touchstart"!==t.type)throw Error("4b74af");this.pointerMoveListener=this.onPointerMove.bind(this),this.pointerMoveListener.type="touchmove",addEventListener("touchmove",this.pointerMoveListener),this.pointerUpListener=this.onPointerUp.bind(this),this.pointerUpListener.type="touchend",addEventListener("touchend",this.pointerUpListener)}this.contextMenuListener||(this.contextMenuListener=this.onContextMenu.bind(this),this.chessboard.view.svg.addEventListener("contextmenu",this.contextMenuListener));break;case u.clickTo:this.draggablePiece&&(o.B.removeElement(this.draggablePiece),this.draggablePiece=null),s===u.dragTo&&this.view.setPieceVisibility(t.square,!0);break;case u.secondClickThreshold:if(u.clickTo!==s)throw new Error("moveInputState");this.startPoint=t.point;break;case u.dragTo:if(u.pieceClickedThreshold!==s)throw new Error("moveInputState");this.view.chessboard.state.inputEnabled()&&(this.view.setPieceVisibility(t.square,!1),this.createDraggablePiece(t.piece));break;case u.clickDragTo:if(u.secondClickThreshold!==s)throw new Error("moveInputState");this.view.chessboard.state.inputEnabled()&&(this.view.setPieceVisibility(t.square,!1),this.createDraggablePiece(t.piece));break;case u.moveDone:if(-1===[u.dragTo,u.clickTo,u.clickDragTo].indexOf(s))throw new Error("moveInputState");this.toSquare=t.square,this.toSquare&&this.validateMoveInputCallback(this.fromSquare,this.toSquare)?this.chessboard.movePiece(this.fromSquare,this.toSquare,s===u.clickTo).then((()=>{s===u.clickTo&&this.view.setPieceVisibility(this.toSquare,!0),this.setMoveInputState(u.reset)})):(this.view.setPieceVisibility(this.fromSquare,!0),this.setMoveInputState(u.reset));break;case u.reset:this.fromSquare&&!this.toSquare&&this.movedPiece&&this.chessboard.state.position.setPiece(this.fromSquare,this.movedPiece),this.fromSquare=null,this.toSquare=null,this.movedPiece=null,this.draggablePiece&&(o.B.removeElement(this.draggablePiece),this.draggablePiece=null),this.pointerMoveListener&&(removeEventListener(this.pointerMoveListener.type,this.pointerMoveListener),this.pointerMoveListener=null),this.pointerUpListener&&(removeEventListener(this.pointerUpListener.type,this.pointerUpListener),this.pointerUpListener=null),this.contextMenuListener&&(removeEventListener("contextmenu",this.contextMenuListener),this.contextMenuListener=null),this.setMoveInputState(u.waitForInputStart);const i=this.view.piecesGroup.querySelectorAll("[visibility=hidden]");for(let e=0;e<i.length;e++)i[e].removeAttribute("visibility");break;default:throw Error(`260b09: moveInputState ${e}`)}}createDraggablePiece(e){if(this.draggablePiece)throw Error("draggablePiece already exists");this.draggablePiece=o.B.createSvg(document.body),this.draggablePiece.classList.add("cm-chessboard-draggable-piece"),this.draggablePiece.setAttribute("width",this.view.squareWidth),this.draggablePiece.setAttribute("height",this.view.squareHeight),this.draggablePiece.setAttribute("style","pointer-events: none"),this.draggablePiece.name=e;const t=this.chessboard.props.assetsCache?"":this.view.getSpriteUrl(),s=o.B.addElement(this.draggablePiece,"use",{href:`${t}#${e}`}),i=this.view.squareHeight/this.chessboard.props.style.pieces.tileSize,r=this.draggablePiece.createSVGTransform();r.setScale(i,i),s.transform.baseVal.appendItem(r)}moveDraggablePiece(e,t){this.draggablePiece.setAttribute("style",`pointer-events: none; position: absolute; left: ${e-this.view.squareHeight/2}px; top: ${t-this.view.squareHeight/2}px`)}onPointerDown(e){if(("mousedown"!==e.type||0!==e.button)&&"touchstart"!==e.type)return;const t=e.target.getAttribute("data-square");if(!t)return;const s=this.chessboard.getPiece(t);let i;if(s&&(i=s?s.substring(0,1):null,("w"===i&&this.chessboard.state.inputWhiteEnabled||"b"===i&&this.chessboard.state.inputBlackEnabled)&&e.preventDefault()),this.moveInputState!==u.waitForInputStart||this.chessboard.state.inputWhiteEnabled&&"w"===i||this.chessboard.state.inputBlackEnabled&&"b"===i){let r;if("mousedown"===e.type?r={x:e.clientX,y:e.clientY}:"touchstart"===e.type&&(r={x:e.touches[0].clientX,y:e.touches[0].clientY}),this.moveInputState===u.waitForInputStart&&s&&this.moveInputStartedCallback(t))this.setMoveInputState(u.pieceClickedThreshold,{square:t,piece:s,point:r,type:e.type});else if(this.moveInputState===u.clickTo)if(t===this.fromSquare)this.setMoveInputState(u.secondClickThreshold,{square:t,piece:s,point:r,type:e.type});else{const s=this.chessboard.getPiece(t),a=s?s.substring(0,1):null,o=this.chessboard.getPiece(this.fromSquare),n=o?o.substring(0,1):null;i&&n===a?(this.moveInputCanceledCallback(this.fromSquare,t,"clickedAnotherPiece"),this.moveInputStartedCallback(t)?this.setMoveInputState(u.pieceClickedThreshold,{square:t,piece:s,point:r,type:e.type}):this.setMoveInputState(u.reset)):this.setMoveInputState(u.moveDone,{square:t})}}}onPointerMove(e){let t,s,i,r,a;if("mousemove"===e.type?(i=e.clientX,r=e.clientY,t=e.pageX,s=e.pageY,a=e.target):"touchmove"===e.type&&(i=e.touches[0].clientX,r=e.touches[0].clientY,t=e.touches[0].pageX,s=e.touches[0].pageY,a=document.elementFromPoint(i,r)),this.moveInputState===u.pieceClickedThreshold||this.moveInputState===u.secondClickThreshold)(Math.abs(this.startPoint.x-i)>4||Math.abs(this.startPoint.y-r)>4)&&(this.moveInputState===u.secondClickThreshold?this.setMoveInputState(u.clickDragTo,{square:this.fromSquare,piece:this.movedPiece}):this.setMoveInputState(u.dragTo,{square:this.fromSquare,piece:this.movedPiece}),this.view.chessboard.state.inputEnabled()&&this.moveDraggablePiece(t,s));else if(this.moveInputState===u.dragTo||this.moveInputState===u.clickDragTo||this.moveInputState===u.clickTo){if(a&&a.getAttribute&&a.parentElement===this.view.boardGroup){const e=a.getAttribute("data-square");e!==this.fromSquare&&e!==this.toSquare?(this.toSquare=e,this.movingOverSquareCallback(this.fromSquare,this.toSquare)):e===this.fromSquare&&null!==this.toSquare&&(this.toSquare=null,this.movingOverSquareCallback(this.fromSquare,null))}else null!==this.toSquare&&(this.toSquare=null,this.movingOverSquareCallback(this.fromSquare,null));!this.view.chessboard.state.inputEnabled()||this.moveInputState!==u.dragTo&&this.moveInputState!==u.clickDragTo||this.moveDraggablePiece(t,s)}}onPointerUp(e){let t;if("mouseup"===e.type?t=e.target:"touchend"===e.type&&(t=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY)),t&&t.getAttribute){const e=t.getAttribute("data-square");if(e)this.moveInputState===u.dragTo||this.moveInputState===u.clickDragTo?this.fromSquare===e?this.moveInputState===u.clickDragTo?(this.chessboard.state.position.setPiece(this.fromSquare,this.movedPiece),this.view.setPieceVisibility(this.fromSquare),this.moveInputCanceledCallback(e,null,"draggedBack"),this.setMoveInputState(u.reset)):this.setMoveInputState(u.clickTo,{square:e}):this.setMoveInputState(u.moveDone,{square:e}):this.moveInputState===u.pieceClickedThreshold?this.setMoveInputState(u.clickTo,{square:e}):this.moveInputState===u.secondClickThreshold&&(this.setMoveInputState(u.reset),this.moveInputCanceledCallback(e,null,"secondClick"));else{this.view.redrawPieces();const e=this.fromSquare;this.setMoveInputState(u.reset),this.moveInputCanceledCallback(e,null,"movedOutOfBoard")}}else this.view.redrawPieces(),this.setMoveInputState(u.reset)}onContextMenu(e){e.preventDefault(),this.view.redrawPieces(),this.setMoveInputState(u.reset),this.moveInputCanceledCallback(this.fromSquare,null,"secondaryClick")}isDragging(){return this.moveInputState===u.dragTo||this.moveInputState===u.clickDragTo}destroy(){this.setMoveInputState(u.reset)}}const p={white:"w",black:"b"},f={moveInputStarted:"moveInputStarted",movingOverSquare:"movingOverSquare",validateMoveInput:"validateMoveInput",moveInputCanceled:"moveInputCanceled",moveInputFinished:"moveInputFinished"},g={none:"none",thin:"thin",frame:"frame"};class m{constructor(e){this.chessboard=e,this.visualMoveInput=new b(this),e.props.assetsCache&&this.cacheSpriteToDiv("cm-chessboard-sprite",this.getSpriteUrl()),this.container=document.createElement("div"),this.chessboard.context.appendChild(this.container),e.props.responsive&&("undefined"!=typeof ResizeObserver?(this.resizeObserver=new ResizeObserver((()=>{setTimeout((()=>{this.handleResize()}))})),this.resizeObserver.observe(this.chessboard.context)):(this.resizeListener=this.handleResize.bind(this),window.addEventListener("resize",this.resizeListener))),this.positionsAnimationTask=Promise.resolve(),this.pointerDownListener=this.pointerDownHandler.bind(this),this.container.addEventListener("mousedown",this.pointerDownListener),this.container.addEventListener("touchstart",this.pointerDownListener,{passive:!1}),this.createSvgAndGroups(),this.handleResize()}pointerDownHandler(e){this.visualMoveInput.onPointerDown(e)}destroy(){this.visualMoveInput.destroy(),this.resizeObserver&&this.resizeObserver.unobserve(this.chessboard.context),this.resizeListener&&window.removeEventListener("resize",this.resizeListener),this.chessboard.context.removeEventListener("mousedown",this.pointerDownListener),this.chessboard.context.removeEventListener("touchstart",this.pointerDownListener),o.B.removeElement(this.svg),this.container.remove()}cacheSpriteToDiv(e,t){if(!document.getElementById(e)){const s=document.createElement("div");s.style.transform="scale(0)",s.style.position="absolute",s.setAttribute("aria-hidden","true"),s.id=e,document.body.appendChild(s);const i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=function(){s.insertAdjacentHTML("afterbegin",i.response)},i.send()}}createSvgAndGroups(){this.svg=o.B.createSvg(this.container);let e=this.chessboard.props.style.cssClass?this.chessboard.props.style.cssClass:"default";this.svg.setAttribute("class","cm-chessboard border-type-"+this.chessboard.props.style.borderType+" "+e),this.svg.setAttribute("role","img"),this.updateMetrics(),this.boardGroup=o.B.addElement(this.svg,"g",{class:"board"}),this.coordinatesGroup=o.B.addElement(this.svg,"g",{class:"coordinates","aria-hidden":"true"}),this.markersLayer=o.B.addElement(this.svg,"g",{class:"markers-layer"}),this.piecesLayer=o.B.addElement(this.svg,"g",{class:"pieces-layer"}),this.piecesGroup=o.B.addElement(this.piecesLayer,"g",{class:"pieces"}),this.markersTopLayer=o.B.addElement(this.svg,"g",{class:"markers-top-layer"}),this.interactiveTopLayer=o.B.addElement(this.svg,"g",{class:"interactive-top-layer"})}updateMetrics(){const e=this.chessboard.props.style.pieces.tileSize;this.width=this.container.clientWidth,this.height=this.container.clientWidth*(this.chessboard.props.style.aspectRatio||1),this.chessboard.props.style.borderType===g.frame?this.borderSize=this.width/25:this.chessboard.props.style.borderType===g.thin?this.borderSize=this.width/320:this.borderSize=0,this.innerWidth=this.width-2*this.borderSize,this.innerHeight=this.height-2*this.borderSize,this.squareWidth=this.innerWidth/8,this.squareHeight=this.innerHeight/8,this.scalingX=this.squareWidth/e,this.scalingY=this.squareHeight/e,this.pieceXTranslate=this.squareWidth/2-e*this.scalingY/2}handleResize(){this.container.style.width=this.chessboard.context.clientWidth+"px",this.container.style.height=this.chessboard.context.clientWidth*this.chessboard.props.style.aspectRatio+"px",this.container.clientWidth===this.width&&this.container.clientHeight===this.height||(this.updateMetrics(),this.redrawBoard(),this.redrawPieces()),this.svg.setAttribute("width","100%"),this.svg.setAttribute("height","100%")}redrawBoard(){this.chessboard.state.invokeExtensionPoints(n.x.beforeRedrawBoard),this.redrawSquares(),this.drawCoordinates(),this.chessboard.state.invokeExtensionPoints(n.x.afterRedrawBoard),this.visualizeInputState()}redrawSquares(){for(;this.boardGroup.firstChild;)this.boardGroup.removeChild(this.boardGroup.lastChild);if(o.B.addElement(this.boardGroup,"rect",{width:this.width,height:this.height}).setAttribute("class","border"),this.chessboard.props.style.borderType===g.frame){const e=this.borderSize;o.B.addElement(this.boardGroup,"rect",{x:e,y:e,width:this.width-2*e,height:this.height-2*e}).setAttribute("class","border-inner")}for(let e=0;e<64;e++){const t=this.chessboard.state.orientation===p.white?e:63-e,s="square "+(9*t&8?"white":"black"),i=this.squareToPoint(r.indexToSquare(t)),a=o.B.addElement(this.boardGroup,"rect",{x:i.x,y:i.y,width:this.squareWidth,height:this.squareHeight});a.setAttribute("class",s),a.setAttribute("data-square",r.indexToSquare(t))}}drawCoordinates(){if(!this.chessboard.props.style.showCoordinates)return;for(;this.coordinatesGroup.firstChild;)this.coordinatesGroup.removeChild(this.coordinatesGroup.lastChild);const e=this.chessboard.props.style.borderType!==g.frame;for(let t=0;t<8;t++){let s=this.borderSize+(17+this.chessboard.props.style.pieces.tileSize*t)*this.scalingX,i=this.height-3.5*this.scalingY,r="coordinate file";e&&(s+=15.5*this.scalingX,r+=t%2?" white":" black");const a=o.B.addElement(this.coordinatesGroup,"text",{class:r,x:s,y:i,style:`font-size: ${10*this.scalingY}px`});this.chessboard.state.orientation===p.white?a.textContent=String.fromCharCode(97+t):a.textContent=String.fromCharCode(104-t)}for(let t=0;t<8;t++){let s=this.borderSize/3.7,i=this.borderSize+25*this.scalingY+t*this.squareHeight,r="coordinate rank";e&&(r+=t%2?" black":" white",this.chessboard.props.style.borderType===g.frame?(s+=10*this.scalingX,i-=15*this.scalingY):(s+=2*this.scalingX,i-=15*this.scalingY));const a=o.B.addElement(this.coordinatesGroup,"text",{class:r,x:s,y:i,style:`font-size: ${10*this.scalingY}px`});this.chessboard.state.orientation===p.white?a.textContent=""+(8-t):a.textContent=""+(1+t)}}redrawPieces(e=this.chessboard.state.position.squares){const t=Array.from(this.piecesGroup.childNodes),s=this.visualMoveInput.isDragging();for(let t=0;t<64;t++){const i=e[t];if(i){const e=r.indexToSquare(t);this.drawPieceOnSquare(e,i,s&&e===this.visualMoveInput.fromSquare)}}for(const e of t)this.piecesGroup.removeChild(e)}drawPiece(e,t,s){const i=o.B.addElement(e,"g",{});i.setAttribute("data-piece",t);const r=this.svg.createSVGTransform();r.setTranslate(s.x,s.y),i.transform.baseVal.appendItem(r);const a=this.chessboard.props.assetsCache?"":this.getSpriteUrl(),n=o.B.addElement(i,"use",{href:`${a}#${t}`,class:"piece"}),h=this.svg.createSVGTransform();return h.setScale(this.scalingY,this.scalingY),n.transform.baseVal.appendItem(h),i}drawPieceOnSquare(e,t,s=!1){const i=o.B.addElement(this.piecesGroup,"g",{});i.setAttribute("data-piece",t),i.setAttribute("data-square",e),s&&i.setAttribute("visibility","hidden");const r=this.squareToPoint(e),a=this.svg.createSVGTransform();a.setTranslate(r.x,r.y),i.transform.baseVal.appendItem(a);const n=this.chessboard.props.assetsCache?"":this.getSpriteUrl(),h=o.B.addElement(i,"use",{href:`${n}#${t}`,class:"piece"}),c=this.svg.createSVGTransform();c.setTranslate(this.pieceXTranslate,0),h.transform.baseVal.appendItem(c);const d=this.svg.createSVGTransform();return d.setScale(this.scalingY,this.scalingY),h.transform.baseVal.appendItem(d),i}setPieceVisibility(e,t=!0){const s=this.getPieceElement(e);s?t?s.setAttribute("visibility","visible"):s.setAttribute("visibility","hidden"):console.warn("no piece on",e)}getPieceElement(e){if(!e||e.length<2)return console.warn("invalid square",e),null;return this.piecesGroup.querySelector(`g[data-square='${e}']`)||(console.warn("no piece on",e),null)}enableMoveInput(e,t=null){if(this.chessboard.state.moveInputCallback)throw Error("moveInput already enabled");t===p.white?this.chessboard.state.inputWhiteEnabled=!0:(t===p.black||(this.chessboard.state.inputWhiteEnabled=!0),this.chessboard.state.inputBlackEnabled=!0),this.chessboard.state.moveInputCallback=e,this.chessboard.state.invokeExtensionPoints(n.x.moveInputToggled,{enabled:!0,color:t}),this.visualizeInputState()}disableMoveInput(){this.chessboard.state.inputWhiteEnabled=!1,this.chessboard.state.inputBlackEnabled=!1,this.chessboard.state.moveInputCallback=null,this.chessboard.state.invokeExtensionPoints(n.x.moveInputToggled,{enabled:!1}),this.visualizeInputState()}moveInputStartedCallback(e){const t={chessboard:this.chessboard,type:f.moveInputStarted,square:e,squareFrom:e,piece:this.chessboard.getPiece(e)};return this.chessboard.state.moveInputCallback&&(t.moveInputCallbackResult=this.chessboard.state.moveInputCallback(t)),this.chessboard.state.invokeExtensionPoints(n.x.moveInput,t),t.moveInputCallbackResult}movingOverSquareCallback(e,t){const s={chessboard:this.chessboard,type:f.movingOverSquare,squareFrom:e,squareTo:t,piece:this.chessboard.getPiece(e)};this.chessboard.state.moveInputCallback&&(s.moveInputCallbackResult=this.chessboard.state.moveInputCallback(s)),this.chessboard.state.invokeExtensionPoints(n.x.moveInput,s)}validateMoveInputCallback(e,t){const s={chessboard:this.chessboard,type:f.validateMoveInput,squareFrom:e,squareTo:t,piece:this.chessboard.getPiece(e)};return this.chessboard.state.moveInputCallback&&(s.moveInputCallbackResult=this.chessboard.state.moveInputCallback(s)),this.chessboard.state.invokeExtensionPoints(n.x.moveInput,s),s.moveInputCallbackResult}moveInputCanceledCallback(e,t,s){const i={chessboard:this.chessboard,type:f.moveInputCanceled,reason:s,squareFrom:e,squareTo:t};this.chessboard.state.moveInputCallback&&this.chessboard.state.moveInputCallback(i),this.chessboard.state.invokeExtensionPoints(n.x.moveInput,i)}moveInputFinishedCallback(e,t,s){const i={chessboard:this.chessboard,type:f.moveInputFinished,squareFrom:e,squareTo:t,legalMove:s};this.chessboard.state.moveInputCallback&&this.chessboard.state.moveInputCallback(i),this.chessboard.state.invokeExtensionPoints(n.x.moveInput,i)}visualizeInputState(){this.chessboard.state&&(this.chessboard.state.inputWhiteEnabled||this.chessboard.state.inputBlackEnabled?this.boardGroup.setAttribute("class","board input-enabled"):this.boardGroup.setAttribute("class","board"))}indexToPoint(e){let t,s;return this.chessboard.state.orientation===p.white?(t=this.borderSize+e%8*this.squareWidth,s=this.borderSize+(7-Math.floor(e/8))*this.squareHeight):(t=this.borderSize+(7-e%8)*this.squareWidth,s=this.borderSize+Math.floor(e/8)*this.squareHeight),{x:t,y:s}}squareToPoint(e){const t=r.squareToIndex(e);return this.indexToPoint(t)}getSpriteUrl(){return h.A.isAbsoluteUrl(this.chessboard.props.style.pieces.file)?this.chessboard.props.style.pieces.file:this.chessboard.props.assetsUrl+this.chessboard.props.style.pieces.file}}const v={wp:"wp",wb:"wb",wn:"wn",wr:"wr",wq:"wq",wk:"wk",bp:"bp",bb:"bb",bn:"bn",br:"br",bq:"bq",bk:"bk"};class w{constructor(e,t={}){if(!e)throw new Error("container element is "+e);this.context=e,this.id=(Math.random()+1).toString(36).substring(2,8),this.extensions=[],this.props={position:i,orientation:p.white,responsive:!0,assetsUrl:"./assets/",assetsCache:!0,style:{cssClass:"default",showCoordinates:!0,borderType:g.none,aspectRatio:1,pieces:{type:"svgSprite",file:"pieces/standard.svg",tileSize:40},animationDuration:300},extensions:[]},h.A.mergeObjects(this.props,t),this.state=new a,this.view=new m(this),this.positionAnimationsQueue=new l(this),this.state.orientation=this.props.orientation;for(const e of this.props.extensions)this.addExtension(e.class,e.props);this.view.redrawBoard(),this.state.position=new r(this.props.position),this.view.redrawPieces(),this.state.invokeExtensionPoints(n.x.positionChanged),this.initialized=Promise.resolve()}async setPiece(e,t,s=!1){const i=this.state.position.clone();return this.state.position.setPiece(e,t),this.state.invokeExtensionPoints(n.x.positionChanged),this.positionAnimationsQueue.enqueuePositionChange(i,this.state.position.clone(),s)}async movePiece(e,t,s=!1){const i=this.state.position.clone();return this.state.position.movePiece(e,t),this.state.invokeExtensionPoints(n.x.positionChanged),this.positionAnimationsQueue.enqueuePositionChange(i,this.state.position.clone(),s)}async setPosition(e,t=!1){const s=this.state.position.clone(),i=new r(e);return s.getFen()!==i.getFen()&&(this.state.position.setFen(e),this.state.invokeExtensionPoints(n.x.positionChanged)),this.positionAnimationsQueue.enqueuePositionChange(s,this.state.position.clone(),t)}async setOrientation(e,t=!1){const s=this.state.position.clone();if(!this.boardTurning)return this.boardTurning=!0,this.positionAnimationsQueue.enqueueTurnBoard(s,e,t).then((()=>{this.boardTurning=!1,this.state.invokeExtensionPoints(n.x.boardChanged)}));console.warn("setOrientation is only once in queue allowed")}getPiece(e){return this.state.position.getPiece(e)}getPosition(){return this.state.position.getFen()}getOrientation(){return this.state.orientation}enableMoveInput(e,t=void 0){this.view.enableMoveInput(e,t)}disableMoveInput(){this.view.disableMoveInput()}isMoveInputEnabled(){return this.state.inputWhiteEnabled||this.state.inputBlackEnabled}enableSquareSelect(e="pointerdown",t){this.squareSelectListener||(this.squareSelectListener=function(e){const s=e.target.getAttribute("data-square");t({eventType:e.type,event:e,chessboard:this,square:s})}),this.context.addEventListener(e,this.squareSelectListener),this.state.squareSelectEnabled=!0,this.view.visualizeInputState()}disableSquareSelect(e){this.context.removeEventListener(e,this.squareSelectListener),this.squareSelectListener=void 0,this.state.squareSelectEnabled=!1,this.view.visualizeInputState()}isSquareSelectEnabled(){return this.state.squareSelectEnabled}addExtension(e,t){if(this.getExtension(e))throw Error('extension "'+e.name+'" already added');this.extensions.push(new e(this,t))}getExtension(e){for(const t of this.extensions)if(t instanceof e)return t;return null}destroy(){this.state.invokeExtensionPoints(n.x.destroy),this.positionAnimationsQueue.destroy(),this.view.destroy(),this.view=void 0,this.state=void 0}}},752:(e,t,s)=>{s.d(t,{T:()=>o});var i=s(521),r=s(892),a=s(547);class o extends i.Y{constructor(e,t={}){super(e),this.registerExtensionPoint(i.x.afterRedrawBoard,(()=>{this.onRedrawBoard()})),this.props={sprite:"extensions/arrows/arrows.svg"},Object.assign(this.props,t),this.chessboard.props.assetsCache&&this.chessboard.view.cacheSpriteToDiv("cm-chessboard-arrows",this.getSpriteUrl()),e.addArrow=this.addArrow.bind(this),e.getArrows=this.getArrows.bind(this),e.removeArrows=this.removeArrows.bind(this),this.arrowGroup=r.B.addElement(e.view.markersTopLayer,"g",{class:"arrows"}),this.arrows=[]}onRedrawBoard(){for(;this.arrowGroup.firstChild;)this.arrowGroup.removeChild(this.arrowGroup.firstChild);this.arrows.forEach((e=>{this.drawArrow(e)}))}drawArrow(e){const t=r.B.addElement(this.arrowGroup,"g");t.setAttribute("data-arrow",e.from+e.to),t.setAttribute("class","arrow "+e.type.class);const s=this.chessboard.view,i=document.querySelectorAll('[data-square="'+e.from+'"]')[0],a=document.querySelectorAll('[data-square="'+e.to+'"]')[0],o=this.chessboard.props.assetsCache?"":this.getSpriteUrl(),n=r.B.addElement(t,"defs"),h="arrow-"+e.from+e.to,c=r.B.addElement(n,"marker",{id:h,markerWidth:e.type.headSize,markerHeight:e.type.headSize,refX:20,refY:20,viewBox:"0 0 40 40",orient:"auto",class:"arrow-head"}),d=(r.B.addElement(c,"use",{href:`${o}#${e.type.slice}`}),i.x.baseVal.value+i.width.baseVal.value/2),l=a.x.baseVal.value+a.width.baseVal.value/2,u=i.y.baseVal.value+i.height.baseVal.value/2,b=a.y.baseVal.value+a.height.baseVal.value/2,p=(s.scalingX+s.scalingY)/2*4;let f=r.B.addElement(t,"line");f.setAttribute("x1",d.toString()),f.setAttribute("x2",l.toString()),f.setAttribute("y1",u.toString()),f.setAttribute("y2",b.toString()),f.setAttribute("class","arrow-line"),f.setAttribute("marker-end","url(#"+h+")"),f.setAttribute("stroke-width",p+"px")}addArrow(e,t,s){this.arrows.push(new n(t,s,e)),this.chessboard.view.redrawBoard()}getArrows(e=void 0,t=void 0,s=void 0){let i=[];return this.arrows.forEach((r=>{r.matches(t,s,e)&&i.push(r)})),i}removeArrows(e=void 0,t=void 0,s=void 0){this.arrows=this.arrows.filter((i=>!i.matches(t,s,e))),this.chessboard.view.redrawBoard()}getSpriteUrl(){return a.A.isAbsoluteUrl(this.props.sprite)?this.props.sprite:this.chessboard.props.assetsUrl+this.props.sprite}}class n{constructor(e,t,s){this.from=e,this.to=t,this.type=s}matches(e=void 0,t=void 0,s=void 0){return!(e&&e!==this.from||t&&t!==this.to||s&&s!==this.type)}}},578:(e,t,s)=>{s.d(t,{c:()=>h,w:()=>n});var i=s(521),r=s(892),a=s(410),o=s(547);const n={frame:{class:"marker-frame",slice:"markerFrame"},framePrimary:{class:"marker-frame-primary",slice:"markerFrame"},frameDanger:{class:"marker-frame-danger",slice:"markerFrame"},circle:{class:"marker-circle",slice:"markerCircle"},circlePrimary:{class:"marker-circle-primary",slice:"markerCircle"},circleDanger:{class:"marker-circle-danger",slice:"markerCircle"},square:{class:"marker-square",slice:"markerSquare"},dot:{class:"marker-dot",slice:"markerDot",position:"above"},bevel:{class:"marker-bevel",slice:"markerBevel"}};class h extends i.Y{constructor(e,t={}){super(e),this.registerExtensionPoint(i.x.afterRedrawBoard,(()=>{this.onRedrawBoard()})),this.props={autoMarkers:n.frame,sprite:"extensions/markers/markers.svg"},Object.assign(this.props,t),e.props.assetsCache&&e.view.cacheSpriteToDiv("cm-chessboard-markers",this.getSpriteUrl()),e.addMarker=this.addMarker.bind(this),e.getMarkers=this.getMarkers.bind(this),e.removeMarkers=this.removeMarkers.bind(this),e.addLegalMovesMarkers=this.addLegalMovesMarkers.bind(this),e.removeLegalMovesMarkers=this.removeLegalMovesMarkers.bind(this),this.markerGroupDown=r.B.addElement(e.view.markersLayer,"g",{class:"markers"}),this.markerGroupUp=r.B.addElement(e.view.markersTopLayer,"g",{class:"markers"}),this.markers=[],this.props.autoMarkers&&(Object.assign(this.props.autoMarkers,this.props.autoMarkers),this.registerExtensionPoint(i.x.moveInput,(e=>{this.drawAutoMarkers(e)})))}drawAutoMarkers(e){e.type!==a.n1.moveInputFinished&&this.removeMarkers(this.props.autoMarkers),(e.type!==a.n1.moveInputStarted||e.moveInputCallbackResult)&&(e.type!==a.n1.moveInputStarted&&e.type!==a.n1.movingOverSquare||(e.squareFrom&&this.addMarker(this.props.autoMarkers,e.squareFrom),e.squareTo&&this.addMarker(this.props.autoMarkers,e.squareTo)))}onRedrawBoard(){for(;this.markerGroupUp.firstChild;)this.markerGroupUp.removeChild(this.markerGroupUp.firstChild);for(;this.markerGroupDown.firstChild;)this.markerGroupDown.removeChild(this.markerGroupDown.firstChild);this.markers.forEach((e=>{this.drawMarker(e)}))}addLegalMovesMarkers(e){for(const t of e)t.promotion&&"q"!==t.promotion||(this.chessboard.getPiece(t.to)?this.chessboard.addMarker(n.bevel,t.to):this.chessboard.addMarker(n.dot,t.to))}removeLegalMovesMarkers(){this.chessboard.removeMarkers(n.bevel),this.chessboard.removeMarkers(n.dot)}drawMarker(e){let t;t="above"===e.type.position?r.B.addElement(this.markerGroupUp,"g"):r.B.addElement(this.markerGroupDown,"g"),t.setAttribute("data-square",e.square);const s=this.chessboard.view.squareToPoint(e.square),i=this.chessboard.view.svg.createSVGTransform();i.setTranslate(s.x,s.y),t.transform.baseVal.appendItem(i);const a=this.chessboard.props.assetsCache?"":this.getSpriteUrl(),o=r.B.addElement(t,"use",{href:`${a}#${e.type.slice}`,class:"marker "+e.type.class}),n=this.chessboard.view.svg.createSVGTransform();return n.setScale(this.chessboard.view.scalingX,this.chessboard.view.scalingY),o.transform.baseVal.appendItem(n),t}addMarker(e,t){"string"!=typeof e&&"object"!=typeof t?(this.markers.push(new c(t,e)),this.onRedrawBoard()):console.error("changed the signature of `addMarker` to `(type, square)` with v5.1.x")}getMarkers(e=void 0,t=void 0){if("string"==typeof e||"object"==typeof t)return void console.error("changed the signature of `getMarkers` to `(type, square)` with v5.1.x");let s=[];return this.markers.forEach((i=>{i.matches(t,e)&&s.push(i)})),s}removeMarkers(e=void 0,t=void 0){"string"!=typeof e&&"object"!=typeof t?(this.markers=this.markers.filter((s=>!s.matches(t,e))),this.onRedrawBoard()):console.error("changed the signature of `removeMarkers` to `(type, square)` with v5.1.x")}getSpriteUrl(){return o.A.isAbsoluteUrl(this.props.sprite)?this.props.sprite:this.chessboard.props.assetsUrl+this.props.sprite}}class c{constructor(e,t){this.square=e,this.type=t}matches(e=void 0,t=void 0){if(!t&&!e)return!0;if(t){if(e){if(this.type===t&&e===this.square)return!0}else if(this.type===t)return!0}else if(e===this.square)return!0;return!1}}},443:(e,t,s)=>{s.d(t,{M:()=>l,O:()=>d});var i=s(521),r=s(410),a=s(892),o=s(547);const n="hidden",h="displayRequested",c="shown",d={pieceSelected:"pieceSelected",canceled:"canceled"};class l extends i.Y{constructor(e){super(e),this.registerExtensionPoint(i.x.afterRedrawBoard,this.extensionPointRedrawBoard.bind(this)),e.showPromotionDialog=this.showPromotionDialog.bind(this),e.isPromotionDialogShown=this.isPromotionDialogShown.bind(this),this.promotionDialogGroup=a.B.addElement(e.view.interactiveTopLayer,"g",{class:"promotion-dialog-group"}),this.state={displayState:n,callback:null,dialogParams:{square:null,color:null}}}showPromotionDialog(e,t,s){this.state.dialogParams.square=e,this.state.dialogParams.color=t,this.state.callback=s,this.setDisplayState(h),setTimeout((()=>{this.chessboard.view.positionsAnimationTask.then((()=>{this.setDisplayState(c)}))}))}isPromotionDialogShown(){return this.state.displayState===c||this.state.displayState===h}extensionPointRedrawBoard(){this.redrawDialog()}drawPieceButton(e,t){const s=this.chessboard.view.squareWidth,i=this.chessboard.view.squareHeight;a.B.addElement(this.promotionDialogGroup,"rect",{x:t.x,y:t.y,width:s,height:i,class:"promotion-dialog-button","data-piece":e}),this.chessboard.view.drawPiece(this.promotionDialogGroup,e,t)}redrawDialog(){for(;this.promotionDialogGroup.firstChild;)this.promotionDialogGroup.removeChild(this.promotionDialogGroup.firstChild);if(this.state.displayState===c){const e=this.chessboard.view.squareWidth,t=this.chessboard.view.squareHeight,s=this.chessboard.view.squareToPoint(this.state.dialogParams.square);s.x=s.x+e/2,s.y=s.y+t/2;let i=!1;const o=parseInt(this.state.dialogParams.square.charAt(1),10);(this.chessboard.getOrientation()===r.o$.white&&o<5||this.chessboard.getOrientation()===r.o$.black&&o>=5)&&(i=!0);const n=i?-4*t:0,h=s.x+e>this.chessboard.view.width?-e:0;a.B.addElement(this.promotionDialogGroup,"rect",{x:s.x+h,y:s.y+n,width:e,height:4*t,class:"promotion-dialog"});const c=this.state.dialogParams;i?(this.drawPieceButton(r.TJ[c.color+"q"],{x:s.x+h,y:s.y-t}),this.drawPieceButton(r.TJ[c.color+"r"],{x:s.x+h,y:s.y-2*t}),this.drawPieceButton(r.TJ[c.color+"b"],{x:s.x+h,y:s.y-3*t}),this.drawPieceButton(r.TJ[c.color+"n"],{x:s.x+h,y:s.y-4*t})):(this.drawPieceButton(r.TJ[c.color+"q"],{x:s.x+h,y:s.y}),this.drawPieceButton(r.TJ[c.color+"r"],{x:s.x+h,y:s.y+t}),this.drawPieceButton(r.TJ[c.color+"b"],{x:s.x+h,y:s.y+2*t}),this.drawPieceButton(r.TJ[c.color+"n"],{x:s.x+h,y:s.y+3*t}))}}promotionDialogOnClickPiece(e){2!==e.button&&(e.target.dataset.piece?(this.state.callback&&this.state.callback({type:d.pieceSelected,square:this.state.dialogParams.square,piece:e.target.dataset.piece}),this.setDisplayState(n)):this.promotionDialogOnCancel(e))}promotionDialogOnCancel(e){this.state.displayState===c&&(e.preventDefault(),this.setDisplayState(n),this.state.callback&&this.state.callback({type:d.canceled}))}contextMenu(e){e.preventDefault(),this.setDisplayState(n),this.state.callback&&this.state.callback({type:d.canceled})}setDisplayState(e){this.state.displayState=e,e===c?(this.clickDelegate=o.A.delegate(this.chessboard.view.svg,"pointerdown","*",this.promotionDialogOnClickPiece.bind(this)),this.contextMenuListener=this.contextMenu.bind(this),this.chessboard.view.svg.addEventListener("contextmenu",this.contextMenuListener)):e===n&&(this.clickDelegate.remove(),this.chessboard.view.svg.removeEventListener("contextmenu",this.contextMenuListener)),this.redrawDialog()}}},892:(e,t,s)=>{s.d(t,{B:()=>r});const i="http://www.w3.org/2000/svg";class r{static createSvg(e=void 0){let t=document.createElementNS(i,"svg");return e&&(t.setAttribute("width","100%"),t.setAttribute("height","100%"),e.appendChild(t)),t}static addElement(e,t,s={}){let r=document.createElementNS(i,t);"use"===t&&(s["xlink:href"]=s.href);for(let e in s)if(s.hasOwnProperty(e))if(-1!==e.indexOf(":")){const t=e.split(":");r.setAttributeNS("http://www.w3.org/1999/"+t[0],t[1],s[e])}else r.setAttribute(e,s[e]);return e.appendChild(r),r}static removeElement(e){e?e.parentNode?e.parentNode.removeChild(e):console.warn(e,"without parentNode"):console.warn("removeElement, element is",e)}}},547:(e,t,s)=>{s.d(t,{A:()=>i});class i{static delegate(e,t,s,i){const r=function(e){let t=e.target;for(;t&&t!==this;)t.matches(s)&&i.call(t,e),t=t.parentNode};return e.addEventListener(t,r),{remove:function(){e.removeEventListener(t,r)}}}static mergeObjects(e,t){const s=e=>e&&"object"==typeof e;if(!s(e)||!s(t))return t;for(const s of Object.keys(t))t[s]instanceof Object&&Object.assign(t[s],i.mergeObjects(e[s],t[s]));return Object.assign(e||{},t),e}static createDomElement(e){const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}static createTask(){let e,t;const s=new Promise((function(s,i){e=s,t=i}));return s.resolve=e,s.reject=t,s}static isAbsoluteUrl(e){return-1!==e.indexOf("://")||e.startsWith("/")}}},521:(e,t,s)=>{s.d(t,{Y:()=>r,x:()=>i});const i={positionChanged:"positionChanged",boardChanged:"boardChanged",moveInputToggled:"moveInputToggled",moveInput:"moveInput",beforeRedrawBoard:"beforeRedrawBoard",afterRedrawBoard:"afterRedrawBoard",redrawBoard:"redrawBoard",animation:"animation",destroy:"destroy"};class r{constructor(e){this.chessboard=e}registerExtensionPoint(e,t){e===i.redrawBoard&&(console.warn("EXTENSION_POINT.redrawBoard is deprecated, use EXTENSION_POINT.afterRedrawBoard"),e=i.afterRedrawBoard),this.chessboard.state.extensionPoints[e]||(this.chessboard.state.extensionPoints[e]=[]),this.chessboard.state.extensionPoints[e].push(t)}registerMethod(e,t){console.warn("registerMethod is deprecated, just add methods directly to the chessboard instance"),this.chessboard[e]?log.error("method",e,"already exists"):this.chessboard[e]=(...e)=>t.apply(this,e)}}}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var s=a[e]={exports:{}};return r[e](s,s.exports,o),s.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o.a=(r,a,o)=>{var n;o&&((n=[]).d=-1);var h,c,d,l=new Set,u=r.exports,b=new Promise(((e,t)=>{d=t,c=e}));b[t]=u,b[e]=e=>(n&&e(n),l.forEach(e),b.catch((e=>{}))),r.exports=b,a((r=>{var a;h=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var a=[];a.d=0,r.then((e=>{o[t]=e,i(a)}),(e=>{o[s]=e,i(a)}));var o={};return o[e]=e=>e(a),o}}var n={};return n[e]=e=>{},n[t]=r,n})))(r);var o=()=>h.map((e=>{if(e[s])throw e[s];return e[t]})),c=new Promise((t=>{(a=()=>t(o)).r=0;var s=e=>e!==n&&!l.has(e)&&(l.add(e),e&&!e.d&&(a.r++,e.push(a)));h.map((t=>t[e](s)))}));return a.r?c:o()}),(e=>(e?d(b[s]=e):c(u),i(n)))),n&&n.d<0&&(n.d=0)},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o(44)})();